import{a as e,r as l,p as a,d as t,c as o,W as r,j as n,M as i,F as s,x as d,m as u,f as c,X as p,b as v,Y as m,J as g,O as h,w as f,q as y,o as b,Z as x,u as _,t as k,_ as w,$ as C,a0 as T,a1 as S,a2 as P,a3 as I,a4 as M,z as O,N as R,a5 as A,G as z,e as j,a6 as E,a7 as N,a8 as F,n as V,K as D,a9 as U,aa as L}from"./vue-all-DfoAxNN6.js";import{R as q}from"./main-oO44yMoG.js";import{d as H,c as $,i as W}from"./storage-all-Dya_zfJv.js";import{n as B,o as Y,A as G,p as K,L as Q,q as X,r as Z,s as J,t as ee,S as le,_ as ae,v as te,w as oe,x as re,y as ne,z as ie,G as se,H as de,M as ue,J as ce,F as pe,j as ve,K as me,N as ge,B as he,g as fe,O as ye,I as be,C as xe,Q as _e,u as ke,U as we}from"./antdv-all-DdS8-XX4.js";import{P as Ce,c as Te,G as Se,t as Pe,a as Ie,b as Me,d as Oe,e as Re,f as Ae,g as ze,h as je,i as Ee,j as Ne,k as Fe,l as Ve,m as De}from"./antd-template-library-DV-LrOLY.js";import{C as Ue,S as Le,g as qe,K as He,N as $e,O as We,T as Be,V as Ye,X as Ge,P as Ke,Y as Qe,h as Xe,Z as Ze,v as Je,w as el,J as ll,H as al,E as tl,_ as ol}from"./ant-design-icons-vue-DMnvrxAr.js";import{P as rl,A as nl,l as il,n as sl,o as dl,C as ul,F as cl}from"./vendors-all-C-qmw3HG.js";import{d as pl,l as vl,a as ml,b as gl,c as hl,_ as fl}from"./assets-all-CV7dZIGH.js";import{d as yl,i as bl,a as xl,b as _l,o as kl,c as wl,e as Cl,q as Tl,w as Sl}from"./date-all-CbEzt2p3.js";import{b as Pl}from"./ant-design-localer-DaRLxVaL.js";import{d as Il}from"./darker-all-dhSHTb20.js";import{a as Ml}from"./fetch-all-BaLKwx-3.js";const Ol={themeColor:{primaryColor:"#f5222d",warningColor:"#faad14",successColor:"#52c41a",errorColor:"#ff4d4f",infoColor:"#1890ff"},themeWeak:!1,themeMode:"light",layoutMode:"side",iconPrefix:"icon-",iconfontUrl:"",contentWidth:"Fluid",componentSize:"middle",domTitle:"Antd Template",language:Pl.locale,multiTab:!0,keepAlive:!0,fixedHeader:!0,fixedSidebar:!0,fixedHeaderTab:!0,hideMixHeaderTab:!0},Rl=H("app",(()=>{const t=e({primaryColor:Ol.themeColor.primaryColor,warningColor:Ol.themeColor.warningColor,successColor:Ol.themeColor.successColor,errorColor:Ol.themeColor.errorColor,infoColor:Ol.themeColor.infoColor}),o=l(!1),r=l(!1),n=l(Ol.domTitle),i=l(Ol.language),s=l(Ol.multiTab),d=l(Ol.keepAlive),u=l(Ol.themeMode),c=l(Ol.themeWeak),p=l(Ol.layoutMode),v=l(Ol.iconPrefix),m=l(Ol.iconfontUrl),g=l(Ol.fixedHeader),h=l(Ol.fixedSidebar),f=l(Ol.fixedHeaderTab),y=l(Ol.hideMixHeaderTab),b=l(Ol.componentSize),x=l(Ol.contentWidth),_=a((()=>"Fixed"===x.value)),k=a((()=>"Fluid"===x.value)),w=a((()=>"mix"===p.value)),C=a((()=>"top"===p.value)),T=a((()=>"side"===p.value)),S=a((()=>"realDark"===u.value)),P=a((()=>t.primaryColor)),I=a((()=>t.warningColor)),M=a((()=>t.successColor)),O=a((()=>t.errorColor)),R=a((()=>t.infoColor)),A=a((()=>{let e="100%",l="100vh",a="100%",t="none",r="100vh",n="none";return C.value&&"Fixed"===x.value&&(e="100%",a="100%",t="1200px"),!w.value||!y.value&&f.value||(l="calc(100vh - 50px)"),w.value&&!y.value&&f.value&&(l="calc(100vh - 90px)"),w.value&&!y.value&&(r="calc(100vh - 90px)"),w.value&&y.value&&(r="calc(100vh - 50px)"),!w.value&&g.value&&f.value&&(l="calc(100vh - 90px)"),w.value||!g.value||f.value||(l="calc(100vh - 50px)"),w.value||g.value||(l="100vh"),w.value||(r="calc(100vh - 90px)"),o.value&&(e="100%",a="100%",t="none",n="none"),{width:e,height:l,minWidth:a,maxWidth:t,minHeight:r,maxHeight:n}})),z=a((()=>/windows/i.test(window.navigator.userAgent))),j=a((()=>/Macintosh/i.test(window.navigator.userAgent)));return{isFixed:_,isFluid:k,isMobile:o,domTitle:n,language:i,multiTab:s,keepAlive:d,collapsed:r,themeMode:u,themeWeak:c,isMixMenu:w,isTopMenu:C,isSideMenu:T,isRealDark:S,layoutMode:p,iconPrefix:v,iconfontUrl:m,fixedHeader:g,fixedSidebar:h,fixedHeaderTab:f,hideMixHeaderTab:y,componentSize:b,contentWidth:x,primaryColor:P,warningColor:I,successColor:M,errorColor:O,infoColor:R,themeColor:t,toggleMobile:e=>{o.value=e},toggleDomTitle:e=>{e&&(e=e??n),(null==e?void 0:e.trim())&&(n.value=null==e?void 0:e.trim()),(null==e?void 0:e.trim())||(n.value=Ol.domTitle),"undefined"!=typeof document&&(document.title=n.value)},toggleLanguage:e=>{i.value=e},toggleMultiTab:e=>{s.value=e},toggleKeepAlive:e=>{d.value=e},toggleCollapsed:e=>{r.value=e},toggleThemeMode:e=>{const l="realDark"===e,a=Il.isEnabled();l&&!a&&Il.enable({brightness:100,contrast:90,sepia:10}),!l&&a&&Il.disable(),u.value=e??u.value},toggleLayoutMode:e=>{p.value=e},toggleIconPrefix:e=>{v.value=e},toggleIconfontUrl:e=>{m.value=e},toggleFixedHeader:e=>{g.value=e},toggleFixedSidebar:e=>{h.value=e},toggleFixedHeaderTab:e=>{f.value=e},toggleHideMixHeaderTab:e=>{y.value=e},toggleComponentSize:e=>{b.value=e},toggleContentWidth:e=>{x.value=e},togglePrimaryColor:e=>{t.primaryColor=e},toggleWarningColor:e=>{t.warningColor=e},toggleSuccessColor:e=>{t.successColor=e},toggleErrorColor:e=>{t.errorColor=e},toggleInfoColor:e=>{t.infoColor=e},toggleThemeWeak:e=>{c.value=e},layoutViewStyle:A,isWindowOS:z,isMacOS:j}}),{persist:{enabled:!0,strategies:[{key:"STORE-APP",storage:localStorage}]}});yl.extend(bl),yl.extend(xl),yl.extend(_l),yl.extend(kl),yl.extend(wl),yl.extend(Cl),yl.extend(Tl),yl.extend(Sl);const Al=e=>"TRUE"===e||"True"===e||"true"===e||!0===e,zl=e=>{const l=/^https?:\/\//i,a=/^\/*/,t=/\/+$/;return l.test(e)||(e=(e=e.replace(t,"")).replace(a,"/")),l.test(e)&&(e=e.replace(t,"")),e},jl=(Al(!1),Al(!0),Al("false"),zl("/api")),El=zl("/previews/vue3.x"),Nl=zl("/previews/vue3.x"),Fl=Al("true"),Vl=Al("false"),Dl={},Ul=function(e,l,a){let t=Promise.resolve();if(l&&l.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),a=(null==e?void 0:e.nonce)||(null==e?void 0:e.getAttribute("nonce"));t=Promise.allSettled(l.map((e=>{if((e=function(e){return"/previews/vue3.x/"+e}(e))in Dl)return;Dl[e]=!0;const l=e.endsWith(".css"),t=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${t}`))return;const o=document.createElement("link");return o.rel=l?"stylesheet":"modulepreload",l||(o.as="script"),o.crossOrigin="",o.href=e,a&&o.setAttribute("nonce",a),document.head.appendChild(o),l?new Promise(((l,a)=>{o.addEventListener("load",l),o.addEventListener("error",(()=>a(new Error(`Unable to preload CSS for ${e}`))))})):void 0})))}function o(e){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=e,window.dispatchEvent(l),!l.defaultPrevented)throw e}return t.then((l=>{for(const e of l||[])"rejected"===e.status&&o(e.reason);return e().catch(o)}))},Ll=t({name:"UserLayout",setup:()=>()=>o("div",{class:"user-layout-wrapper",style:"width: 100%; height: 100%"},[o("div",{class:"container",style:"width: 100%; height: 100%; background-size: 100%; background-repeat: no-repeat; position: relative;"},[o(r,null,null)])])}),ql=Object.freeze(Object.defineProperty({__proto__:null,default:Ll},Symbol.toStringTag,{value:"Module"})),Hl=H("tag",(()=>{const e=l(["BasicLayout","RouteView","PageFrame","PageView"]),a=l([]),t=l([]),o=l(null),r=e=>{var l;return Object.assign({},{fullPath:e.fullPath,path:e.path,meta:e.meta,name:e.name,query:e.query,params:e.params,title:e.meta.title||"未定义",matched:null==(l=e.matched)?void 0:l.map((e=>({path:e.path,name:e.name,meta:e.meta})))})},i=l=>{const o=l.meta.componentName,r=Rl().keepAlive,i=!1!==l.meta.allowCache;return r&&i&&o&&!e.value.includes(o)&&e.value.push(o),{stackTags:n(a),visitTags:n(t),cacheTags:n(e)}},s=l=>{const i=a.value.find((e=>e.fullPath===l.fullPath)),s=t.value.find((e=>e.fullPath===l.fullPath));return i&&(a.value.splice(a.value.indexOf(i),1),a.value.unshift(i)),i||a.value.unshift(r(l)),s||(o.value=r(l),t.value.push(o.value)),s&&(o.value=s),{stackTags:n(a),visitTags:n(t),cacheTags:n(e)}},d=l=>(e.value=e.value.filter((e=>e!==l.meta.componentName)),e.value=Array.from(new Set([...e.value,"BasicLayout","RouteView","PageFrame","PageView"])),{stackTags:n(a),visitTags:n(t),cacheTags:n(e)}),u=l=>(a.value=a.value.filter((e=>e.fullPath!==l.fullPath)),t.value=t.value.filter((e=>e.fullPath!==l.fullPath)),o.value&&a.value.includes(o.value)||(o.value=a.value[0]||null),{stackTags:n(a),visitTags:n(t),cacheTags:n(e)}),c=l=>(e.value=e.value.filter((e=>e===l.meta.componentName)),e.value=Array.from(new Set([...e.value,"BasicLayout","RouteView","PageFrame","PageView"])),{stackTags:n(a),visitTags:n(t),cacheTags:n(e)}),p=l=>(a.value=a.value.filter((e=>e.fullPath===l.fullPath)),t.value=t.value.filter((e=>e.fullPath===l.fullPath)),o.value&&a.value.includes(o.value)||(o.value=a.value[0]||null),{stackTags:n(a),visitTags:n(t),cacheTags:n(e)}),v=()=>(e.value=["BasicLayout","RouteView","PageFrame","PageView"],{stackTags:n(a),visitTags:n(t),cacheTags:n(e)}),m=()=>(a.value=[],t.value=[],o.value=null,{stackTags:n(a),visitTags:n(t),cacheTags:n(e)});return{stackTags:a,visitTags:t,cacheTags:e,currentTag:o,addTags:l=>(i(l),s(l),{stackTags:n(a),visitTags:n(t),cacheTags:n(e)}),addCacheTags:i,addVisitTags:s,updateVisitedTags:l=>{for(const e of a.value)if(e.fullPath===l.fullPath){Object.assign(e,r(l));break}for(const e of t.value)if(e.fullPath===l.fullPath){Object.assign(e,r(l));break}return{stackTags:n(a),visitTags:n(t),cacheTags:n(e)}},delTags:l=>(d(l),u(l),{stackTags:n(a),visitTags:n(t),cacheTags:n(e)}),delCacheTags:d,delVisitTags:u,delOtherTags:l=>(c(l),p(l),{stackTags:n(a),visitTags:n(t),cacheTags:n(e)}),delOtherCacheTags:c,delOtherVisitTags:p,delAllTags:()=>(v(),m(),{stackTags:n(a),visitTags:n(t),cacheTags:n(e)}),delAllCacheTags:v,delAllVisitTags:m,delCurrentTag:()=>(o.value&&(d(o.value),u(o.value)),{stackTags:n(a),visitTags:n(t),cacheTags:n(e)})}}),{persist:{enabled:!0,strategies:[{storage:sessionStorage,key:"STORE-STACK-TAGS",paths:["stackTags"]},{storage:sessionStorage,key:"STORE-VISIT-TAGS",paths:["visitTags"]}]}}),$l=[{name:"极客蓝",color:"#4557ff"},{name:"拂晓蓝",color:"#1890ff"},{name:"薄暮",color:"#f5222d"},{name:"火山",color:"#fa541c"},{name:"日暮",color:"#faad14"},{name:"明青",color:"#13c2c2"},{name:"极光绿",color:"#52c41a"},{name:"酱紫",color:"#722ed1"}],Wl=t({name:"LayoutSettingDrawer",setup(){const e=l(!1),a=Rl(),t=e=>o("div",e,[o("h3",{class:"setting-title"},[d("布局风格")]),o("div",{class:"setting-checbox"},[o(G,{title:"侧边菜单导航"},{default:()=>[o("div",{class:"setting-checbox-item",onClick:()=>a.toggleLayoutMode("side")},[o("div",{class:"setting-icon bg-light sidemenu-dark topmenu-light"},null),o("div",{class:"setting-check"},[a.isSideMenu?o(Ue,null,null):null])])]}),o(G,{title:"顶部菜单导航"},{default:()=>[o("div",{class:"setting-checbox-item",onClick:()=>a.toggleLayoutMode("top")},[o("div",{class:"setting-icon bg-light topmenu-dark"},null),o("div",{class:"setting-check"},[a.isTopMenu?o(Ue,null,null):null])])]}),o(G,{title:"混合菜单导航"},{default:()=>[o("div",{class:"setting-checbox-item",onClick:()=>a.toggleLayoutMode("mix")},[o("div",{class:"setting-icon bg-light sidemenu-dark topmenu-dark"},null),o("div",{class:"setting-check"},[a.isMixMenu?o(Ue,null,null):null])])]})])]),r=e=>o("div",e,[o("h3",{class:"setting-title"},[d("组件风格")]),o("div",{class:"setting-components"},[o("span",{class:"setting-component",onClick:()=>a.toggleComponentSize("small")},[o(K,{class:"setting-components-tag",color:"small"===a.componentSize?"var(--ant-primary-color)":"#e3e3e3"},{default:()=>[o("span",{class:"setting-components-text"},[d("小")])]})]),o("span",{class:"setting-component",onClick:()=>a.toggleComponentSize("middle")},[o(K,{class:"setting-components-tag",color:"middle"===a.componentSize?"var(--ant-primary-color)":"#e3e3e3"},{default:()=>[o("span",{class:"setting-components-text"},[d("中")])]})]),o("span",{class:"setting-component",onClick:()=>a.toggleComponentSize("large")},[o(K,{class:"setting-components-tag",color:"large"===a.componentSize?"var(--ant-primary-color)":"#e3e3e3"},{default:()=>[o("span",{class:"setting-components-text"},[d("大")])]})])])]),n=e=>o("div",e,[o("h3",{class:"setting-title"},[d("主题风格")]),o("div",{class:"setting-checbox"},[o(G,{title:"亮色主题风格"},{default:()=>[o("div",{class:"setting-checbox-item",onClick:()=>a.toggleThemeMode("light")},[o("div",{class:"setting-icon bg-light sidemenu-light topmenu-light"},null),o("div",{class:"setting-check"},["light"===a.themeMode?o(Ue,null,null):null])])]}),o(G,{title:"暗色主题风格"},{default:()=>[o("div",{class:"setting-checbox-item",onClick:()=>a.toggleThemeMode("dark")},[o("div",{class:"setting-icon bg-light sidemenu-dark topmenu-light"},null),o("div",{class:"setting-check"},["dark"===a.themeMode?o(Ue,null,null):null])])]}),o(G,{title:"暗黑主题风格"},{default:()=>[o("div",{class:"setting-checbox-item",onClick:()=>a.toggleThemeMode("realDark")},[o("div",{class:"setting-icon bg-dark"},null),o("div",{class:"setting-check"},["realDark"===a.themeMode?o(Ue,null,null):null])])]})])]),c=e=>o("div",e,[o("h3",{class:"setting-title"},[d("主题颜色")]),o("div",{class:"setting-tags"},[$l.map((({name:e,color:l})=>o(G,{title:e},{default:()=>[o("div",{class:"setting-tag",onClick:()=>a.togglePrimaryColor(l)},[o(K,{style:"width: 100%; height: 100%; padding: 0;",color:l},{default:()=>[o("div",{class:"setting-check"},[a.primaryColor===l?o(Ue,null,null):null])]})])]})))])]),p=e=>o("div",e,[o("h3",{class:"setting-title"},[d("导航设置")]),o("div",{class:"setting-navigates"},[o(Q,{split:!1,size:"small"},{default:()=>[o(X,{style:"padding: 4px 3px; margin: 13px 0 10px;",actions:[o(le,{size:"small",value:a.contentWidth,onChange:e=>a.toggleContentWidth(e)},{default:()=>[o(ee,{value:"Fixed"},{default:()=>[d("固定")]}),o(ee,{value:"Fluid"},{default:()=>[d("流式")]})]})]},{default:()=>[o(Z,{title:"内容区域宽度"},null)]}),o(X,{style:"padding: 4px 3px; margin: 13px 0 10px;",actions:[o(ae,{size:"small",checked:a.fixedHeader,onChange:e=>a.toggleFixedHeader(e)},null)]},{default:()=>[o(Z,{title:"固定顶部栏导航"},null)]}),o(X,{style:"padding: 4px 3px; margin: 13px 0 10px;",actions:[o(ae,{size:"small",checked:a.fixedSidebar,onChange:e=>a.toggleFixedSidebar(e)},null)]},{default:()=>[o(Z,{title:"固定侧边栏菜单"},null)]}),o(X,{style:"padding: 4px 3px; margin: 13px 0 10px;",actions:[o(ae,{size:"small",checked:a.fixedHeaderTab,onChange:e=>a.toggleFixedHeaderTab(e)},null)]},{default:()=>[o(Z,{title:"固定导航栏页签"},null)]}),o(X,{style:"padding: 4px 3px; margin: 13px 0 10px;",actions:[o(ae,{size:"small",checked:a.hideMixHeaderTab,onChange:e=>a.toggleHideMixHeaderTab(e)},null)]},{default:()=>[o(Z,{title:"隐藏混合导航栏页签"},null)]})]})])]),v=e=>o("div",e,[o("h3",{class:"setting-title"},[d("其他设置")]),o("div",{class:"setting-others"},[o(Q,{split:!1,size:"small"},{default:()=>[o(X,{style:"padding: 4px 3px; margin: 13px 0 10px;",actions:[o(ae,{size:"small",checked:a.themeWeak,onChange:e=>a.toggleThemeWeak(e)},null)]},{default:()=>[o(Z,{title:"色弱模式"},null)]}),o(X,{style:"padding: 4px 3px; margin: 13px 0 10px;",actions:[o(ae,{size:"small",checked:a.multiTab,onChange:e=>a.toggleMultiTab(e)},null)]},{default:()=>[o(Z,{title:"多页签模式"},null)]}),o(X,{style:"padding: 4px 3px; margin: 13px 0 10px;",actions:[o(ae,{size:"small",checked:a.keepAlive,disabled:!a.multiTab,onChange:e=>a.toggleKeepAlive(e)},null)]},{default:()=>[o(Z,{title:"多页签缓存"},null)]})]})])]),m=e=>{const l=console.info;return o("div",u(e,{onClick:()=>l(`{\n  themeColor: {\n    primaryColor: '${a.primaryColor}',\n    warningColor: '${a.warningColor}',\n    successColor: '${a.successColor}',\n    errorColor: '${a.errorColor}',\n    infoColor: '${a.infoColor}'\n  },\n  themeWeak: ${a.themeWeak},\n  themeMode: '${a.themeMode}',\n  layoutMode: '${a.layoutMode}',\n  iconPrefix: '${a.iconPrefix}',\n  iconfontUrl: '${a.iconfontUrl}',\n  contentWidth: '${a.contentWidth}',\n  componentSize: '${a.componentSize}',\n  domTitle: '${Ol.domTitle}',\n  language: '${a.language}',\n  multiTab: ${a.multiTab},\n  keepAlive: ${a.keepAlive},\n  fixedHeader: ${a.fixedHeader},\n  fixedSidebar: ${a.fixedSidebar},\n  fixedHeaderTab: ${a.fixedHeaderTab},\n  hideMixHeaderTab: ${a.hideMixHeaderTab}\n}`)}),[o(J,{type:"warning",style:{marginBottom:"5px",fontSize:"14px",cursor:"pointer"},message:o(s,null,[o("span",null,[d("配置栏应用于开发环境中预览、调试")]),o("br",null,null),o("span",null,[d("点击此处 - 可在游览器Console界面中查看目前配置选项")])])},null)])},g=()=>e.value?o(qe,{style:"color: #ffffff;"},null):o(Le,{style:"color: #ffffff;"},null);if(!Vl)return()=>o(s,null,[o(B,{width:"300",open:e.value,closable:!0,forceRender:!0,placement:"right",prefixCls:"layout-setting-drawer",contentWrapperStyle:{display:"block",transform:e.value?"translateX(0)":"translateX(100%)"},headerStyle:{padding:"16px 0",direction:"rtl",border:"none"},rootStyle:{width:e.value?"100%":0},bodyStyle:{padding:"0 0 10px"},onClose:()=>{e.value=!1}},{default:()=>[o("div",{class:"layout-setting-drawer-body-content"},[o(t,{style:"margin-bottom: 22px;"},null),o(Y,null,null),o(r,null,null),o(n,{style:"margin: 22px 0 0;"},null),o(c,{style:"margin: 28px 0 20px;"},null),o(Y,null,null),o(p,{style:"margin-bottom: 22px;"},null),o(Y,null,null),o(v,{style:"margin-bottom: 30px;"},null),o(Y,null,null),o(m,null,null)])]}),o(i,{to:".layout-setting-drawer-content-wrapper"},{default:()=>[o("div",{class:"layout-setting-drawer-body-button",onClick:()=>{e.value=!e.value}},[o(g,null,null)])]})])}});const Bl=t({name:"LayoutBreadcrumb",props:{multiTab:rl().def(!1),isMixMenu:rl().def(!1),hideMixHeaderTab:rl().def(!0)},setup(e){const l=p(),t=a((()=>l.matched));return()=>{let l;var a;if(!e.multiTab&&(!e.isMixMenu||!e.hideMixHeaderTab))return o("div",{class:"layout-breadcrumb",style:"height: 38px;"},[o("div",{style:{width:"100%",height:"38px",padding:"9px 0 0 12px",backgroundColor:"#ffffff",boxShadow:"0 1px 1px 0 rgba(0, 0, 0, 0.15)",position:"relative",zIndex:9}},[o(te,null,(a=l=t.value.map(((e,l)=>o(oe,null,{default:()=>[0===l&&o(He,null,null),o("span",null,[e.meta.title])]}))),"function"==typeof a||"[object Object]"===Object.prototype.toString.call(a)&&!c(a)?l:{default:()=>[l]}))])])}}});const Yl=t({name:"LayoutMultiTab",props:{multiTab:rl().def(!1),isMixMenu:rl().def(!1),hideMixHeaderTab:rl().def(!0)},setup(e){const a=p(),t=m(),r=Hl(),n=l(a.fullPath),i=e=>r.visitTags.find((l=>e===l||e===l.fullPath)),s=e=>{for(const l of e)r.delTags(l);e.some((e=>n.value===e.fullPath))&&(n.value=r.stackTags.map((e=>e.fullPath))[0]||"/")},u=e=>{const l=i(e),a=r.visitTags.length<=1;l&&a&&ne.info("这是最后一个标签了, 无法被关闭"),l&&!a&&s([i(e)])},g={closeThis:u,closeLeft:e=>{const l=r.visitTags.findIndex((l=>l===i(e)));l>0&&s(r.visitTags.filter(((e,a)=>a<l))),l<=0&&ne.info("左侧没有标签")},closeRight:e=>{const l=r.visitTags.length-1,a=r.visitTags.findIndex((l=>l===i(e)));a<l&&s(r.visitTags.filter(((e,l)=>l>a))),a>=l&&ne.info("右侧没有标签")},closeOthers:e=>{const l=r.visitTags.findIndex((l=>l===i(e)));s(r.visitTags.filter(((e,a)=>a!==l)))}};return r.$onAction((({name:e,after:l})=>{if("delCurrentTag"===e){const e=i(n.value);l((()=>s([e])))}})),v(n,(e=>e!==a.fullPath&&t.push(i(e)))),v(a,(e=>(e=>{e={...e,meta:{...e.meta,icon:void 0}},n.value=e.fullPath,r.updateVisitedTags(e),r.addCacheTags(e),r.addVisitTags(e)})(e)),{immediate:!0}),()=>{let l;const a=e=>o(ue,{onClick:({key:l})=>{var a;return null==(a=g[l])?void 0:a.call(g,e)}},{default:()=>[o(de,{key:"closeThis"},{default:()=>[d("关闭当前标签")]}),o(de,{key:"closeLeft"},{default:()=>[d("关闭左侧标签")]}),o(de,{key:"closeRight"},{default:()=>[d("关闭右侧标签")]}),o(de,{key:"closeOthers"},{default:()=>[d("关闭其他标签")]})]}),t=(e,l)=>o(se,{overlay:a(l),trigger:["contextmenu"]},{default:()=>[o("span",null,[e])]});var i;if(e.multiTab&&(!e.isMixMenu||!e.hideMixHeaderTab))return o("div",{class:"layout-tabs-container"},[o("div",{style:{width:"100%",height:"38px",boxSizing:"border-box",boxShadow:"0 .5px 1px 0 rgba(0, 0, 0, 0.15)",position:"relative",zIndex:9}},[o(re,{hideAdd:!0,size:"small",type:"editable-card",prefixCls:"layout-tabs",activeKey:n.value,"onUpdate:activeKey":e=>n.value=e,onEdit:(e,l)=>"remove"===l?u(e):null,tabBarStyle:{margin:"0 0",padding:"6.5px 0 5px",background:"#ffffff"}},(i=l=r.visitTags.map((e=>{var l;const a=e.fullPath,n="external"===e.meta.match&&(null==(l=e.query)?void 0:l.title)||e.meta.title;return o(ie,{key:e.fullPath,tab:t(n,a),closable:r.visitTags.length>1},null)})),"function"==typeof i||"[object Object]"===Object.prototype.toString.call(i)&&!c(i)?l:{default:()=>[l]}))])])}}}),Gl=e=>(e.interceptors.request.use((e=>{const l=Ql(),a=e.headers;return l.token&&!a.token&&null!==a.token&&(a.token=`${l.token}`),void 0===a["x-msw-requester"]&&(a["x-msw-requester"]="Axios"),null===a.token&&delete a.token,e})),e.interceptors.response.use((e=>{var l,a;const t=e.config,o=e.status,r=t.messager;return o<200||o>300?Promise.reject(e):"blob"===t.responseType||"stream"===t.responseType||"arraybuffer"===t.responseType?e:!r&&["403","401",403,401].includes(null==(l=e.data)?void 0:l.code)||r&&"0000"!==(null==(a=e.data)?void 0:a.code)?Promise.reject(e):e.data})),e.interceptors.response.use((e=>e),(e=>{var l,a,t,o,r,n,i,s,d,u;let c=500,p=null,v=!0;const m=Ql().token,g=Ql().logout,h=Promise.reject(e);try{c=(null==(l=e.response)?void 0:l.status)||e.status||c,c=(null==(t=null==(a=e.response)?void 0:a.data)?void 0:t.code)||(null==(o=e.data)?void 0:o.code)||c,p=(null==(n=null==(r=e.response)?void 0:r.data)?void 0:n.message)||(null==(i=e.data)?void 0:i.message)||null,v=!1!==((null==(d=null==(s=e.response)?void 0:s.config)?void 0:d.messager)??(null==(u=e.config)?void 0:u.messager))}catch{}return e.toString().indexOf("timeout")>-1?(ce.error({duration:1.5,message:"系统消息",description:"请求超时"}),h):403===c||"403"===c?(ce.error({duration:1.5,message:"系统消息",description:p||"暂无权限"}),h):401===c||"401"===c?(ce.error({duration:1.5,message:"系统消息",description:p||(m?"token已过期":"暂无权限")}),m&&g().then((()=>{setTimeout((()=>window.location.reload()),800)})),h):(!0===v&&ce.error({duration:1.5,message:"系统消息",description:p??"系统异常"}),h)})),e),Kl=(e=>{const l=Ml.create(e),a=Gl(l);return e=>a(e)})({baseURL:jl||"/",timeout:3e4,messager:!0});const Ql=H("user",(()=>{const e=l(""),t=l(""),o=l(""),r=l(""),n=l(pl),i=l(""),s=l(""),d=l(""),u=l(""),c=l(""),p=l({}),v=l({}),m=a((()=>o.value)),g=Hl(),h=l(!1),f=async(l={})=>{e.value="",t.value="",o.value="",i.value="",s.value="",d.value="",u.value="",c.value="",n.value=pl,p.value={},v.value={},h.value=!1};return{token:e,userNo:t,userName:o,mobilePhone:r,avatar:n,orgId:i,orgName:s,deptId:d,deptName:u,dataFlag:c,userInfo:p,userRole:v,nickname:m,logined:h,login:async(l={})=>{return g&&g.delAllTags(),h.value&&(h.value=!1),(a=l,Kl({url:"/auth/login",method:"post",data:a})).then((l=>{if("0000"!==l.code)return Promise.reject(l);const a=l.result||{},n=a.data;return e.value=a.token,t.value=(null==n?void 0:n.userNo)||"",o.value=(null==n?void 0:n.userName)||"",r.value=(null==n?void 0:n.mobilePhone)||"",i.value=(null==n?void 0:n.orgId)||"",s.value=(null==n?void 0:n.orgName)||"",d.value=(null==n?void 0:n.deptId)||"",u.value=(null==n?void 0:n.deptName)||"",l}));var a},logout:async(l={})=>{return g&&g.delAllTags(),e.value?(a=l,Kl({url:"/auth/logout",method:"post",data:a})).then((()=>f())).catch((()=>f())):f();var a},loginUserInfo:async(e={})=>{return(l=e,Kl({url:"/auth/loginUserInfo",method:"post",data:l})).then((e=>{if("0000"!==e.code)return Promise.reject(new Error(e.message||"获取用户失败!"));const l=e.result;if(p.value=l||p.value,v.value=l.role||v.value,t.value=l.userNo||t.value,o.value=l.userName||o.value,n.value=l.avatar||n.value,i.value=l.orgId||i.value,s.value=l.orgName||s.value,d.value=l.deptId||d.value,u.value=l.deptName||u.value,c.value=l.dataFlag||c.value,v.value&&v.value.permissions){for(const e of v.value.permissions)e.actionEntitySet&&(e.actionList=e.actionEntitySet.map((e=>e.action)));v.value.permissionList=v.value.permissions.map((e=>e.permissionId))}return h.value=!0,e}));var l}}}),{persist:{enabled:!0,strategies:[{storage:localStorage,key:"STORE-TOKEN",paths:["token"]},{storage:localStorage,key:"STORE-ORG-ID",paths:["orgId"]},{storage:localStorage,key:"STORE-USER-NO",paths:["userNo"]}]}}),Xl=t({name:"LayoutAvatar",props:{isTopMenu:rl().def(!1),isSideMenu:rl().def(!1),themeMode:nl().def("light")},setup(){const t=Rl(),r=Ql(),n=g(r,"nickname"),i=g(r,"avatar"),u=l(!1),c=a((()=>"light"!==t.themeMode&&"top"===t.layoutMode&&!t.isMobile||"light"!==t.themeMode&&"mix"===t.layoutMode)),p=()=>{const e=()=>{ge.confirm({title:"提示",content:"真的要注销登录吗 ?",onOk:()=>{r.logout().then((()=>window.location.replace("/")))}})};return o(s,null,[o(ue,{class:"layout-avatar-dropdown",style:"min-width: 120px"},{default:()=>[o(de,{key:"1"},{default:()=>[o("a",{href:"javascript:void(0);",onClick:()=>{u.value=!0}},[o(Le,{style:"margin-right: 10px"},null),o("span",null,[d("修改密码")])])]}),o(de,{key:"2"},{default:()=>[o("a",{href:"javascript:void(0);",onClick:e},[o($e,{style:"margin-right: 10px"},null),o("span",null,[d("退出登录")])])]})]})])},v=()=>{const a=l(),t=e({password:"",newPassword:"",confirmPassword:""}),n=e({password:[{required:!0,message:"请输入原密码"}],newPassword:[{required:!0,validator:(e,l)=>""===l?Promise.reject(new Error("请输入新密码")):l===t.password?Promise.reject(new Error("新密码与旧密码一样, 请重新输入")):/[a-z0-9A-Z_]{8,}/.test(l)?Promise.resolve():Promise.reject(new Error("您的密码长度不足8位"))}],confirmPassword:[{required:!0,validator:(e,l)=>""===l?Promise.reject(new Error("请确认新密码")):l!==t.newPassword?Promise.reject(new Error("确认密码与新密码不一样, 请重新输入")):Promise.resolve()}]}),i=async()=>{try{const l={userNo:r.userNo,password:t.password,newPassword:t.newPassword};return await a.value.validate(),await(e=l,Kl({url:"/auth/modifyPassword",method:"post",data:e})).then((e=>{if("0000"!==e.code)return Promise.reject(e)})),r.logout().then((()=>{ne.success("修改成功，即将返回登录界面"),window.location.reload()}))}catch(l){ne.error(l.message)}var e};return o(ge,{width:420,title:"修改密码",bodyStyle:{padding:"15px 30px 10px 30px"},open:u.value,"onUpdate:open":e=>u.value=e},{default:()=>[o(pe,{ref:a,model:t,rules:n,hideRequiredMark:!0},{default:()=>[o(ve,{name:"password",label:"原密码"},{default:()=>[o(me,{value:t.password,"onUpdate:value":e=>t.password=e,placeholder:"请输入原密码"},null)]}),o(ve,{name:"newPassword",label:"新密码",hasFeedback:!0},{default:()=>[o(me,{value:t.newPassword,"onUpdate:value":e=>t.newPassword=e,placeholder:"请输入新密码"},null)]}),o(ve,{name:"confirmPassword",label:"确认密码",hasFeedback:!0},{default:()=>[o(me,{value:t.confirmPassword,"onUpdate:value":e=>t.confirmPassword=e,placeholder:"请确认新密码"},null)]})]})],footer:()=>o(s,null,[o(he,{key:"back",onClick:()=>{u.value=!1}},{default:()=>[o("span",null,[d("取消")])]}),o(he,{key:"submit",type:"primary",onClick:()=>{i()}},{default:()=>[o("span",null,[d("提交")])]})])})};return()=>o("div",{class:"layout-avatar-container",style:{height:"100%",padding:"0 16px 0 10px",color:c.value?"inherit":"#ffffff",cursor:"pointer"}},[o(se,{overlay:p()},{default:()=>[o("div",{class:"layout-avatar-wrapper",style:{height:"100%",display:"flex",flexFlow:"row nowrap",alignItems:"center",alignContent:"center"}},[o("div",{class:"layout-avatar-img",style:"width: 30px; height: 30px; flex: 0 0 auto; margin-right: 6px;"},[o("img",{style:"display: block; width: 100%; height: 100%; margin: 0;",src:i.value},null)]),o("span",{class:"layout-avatar-nick",style:{flex:"1 1 auto",maxWidth:"120px",color:c.value?"#f9f9f9":"#303133",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}},[n.value])])]}),o(v,null,null)])}}),Zl=t({name:"LayoutLogo",props:{full:rl().def(!1),title:nl().def(""),isMobile:rl().def(!1),isSideMenu:rl().def(!1),collapsed:rl().def(!1),layoutMode:nl().def("side"),themeMode:nl().def("light")},setup(e){const{full:l,title:t,collapsed:r,isSideMenu:n}=h(e),i=a((()=>n.value&&r.value?48:192)),s=a((()=>e.isMobile&&"mix"===e.layoutMode?"realDark"===e.themeMode:"light"!==e.themeMode)),d=a((()=>n.value&&r.value?u.value:c.value)),u=a((()=>s.value?vl:ml)),c=a((()=>s.value?gl:hl)),p=()=>o("div",{class:"layout-logo-content",style:{flex:"0 0 auto",justifyContent:"center",alignItems:"center",display:"flex",width:l.value||!t.value?"100%":"48px",height:l.value||!t.value?"100%":"48px",textAlign:"center",overflow:"hidden",padding:"0 0",margin:"0 0"}},[o("img",{src:l.value||!t.value?d.value:u.value,style:"width: 100%; height: 100%; display: block"},null)]),v=()=>{if(n.value&&r.value)return null;const e={flex:"1 1 auto",margin:"0 0",height:"48px",fontSize:"18px",lineHeight:"48px",color:s.value?"#ffffff":"var(--ant-primary-color)"};return o("h1",{style:e},[t.value])};return()=>o("div",{class:"layout-logo-container",style:{display:"flex",width:`${i.value}px`,height:"48px"}},[o(p,null,null),o(v,null,null)])}}),Jl=t({name:"BasicLayout",setup(){const e=p(),t=m(),n=Rl(),i=Hl(),s=l(!0),d=l(192),c=l(48),g=l(48),h=l(null),k=new window.IntersectionObserver((e=>{e[0].intersectionRatio<=.5&&j()})),w=a((()=>({overflow:n.isMixMenu&&(n.hideMixHeaderTab||!n.fixedHeaderTab)||!n.isMixMenu&&n.fixedHeader&&!n.fixedHeaderTab?"auto":"visible"}))),C=a((()=>{var e;const l=(null==(e=t.getRoutes().find((e=>"/"===e.path)))?void 0:e.children)||[];return Te(l)})),T=l(!n.collapsed&&!n.isTopMenu||n.isMobile),S=l(e.matched.map((e=>e.path)).filter((e=>"/"!==e))),P=l(e.matched.map((e=>e.path)).filter((e=>"/"!==e))),I=l(e.matched.map((e=>e.path)).filter((e=>"/"!==e&&T.value))),M=(e,l)=>{for(const a of l){if(a.path===e)return[a.path];if(a.children&&a.children.length>0){const l=M(e,a.children);if(l)return[a.path,...l]}}return null},O=(e,l)=>{if(n.toggleMobile(e.isMobile),e.isMobile||n.isSideMenu||n.isMixMenu){const l={margin:"0 0",padding:"0 15px",fontSize:"24px",color:a((()=>!n.isMobile&&"light"!==n.themeMode&&"side"!==n.layoutMode||n.isMobile&&"dark"===n.themeMode&&"mix"===n.layoutMode||"realDark"===n.themeMode)).value?"#ffffff":"var(--ant-primary-color)",cursor:"pointer"};return o(Se,u(e,{iconPrefix:n.iconPrefix,iconfontUrl:n.iconfontUrl}),{default:()=>[o("div",{ref:h,style:"display: flex; flex: 1 1 auto; align-items: center; height: 48px; lineHeight: 48px;"},[o("h1",{style:l,onClick:()=>n.toggleCollapsed(!n.collapsed)},[e.collapsed?o(We,null,null):o(Be,null,null)])])]})}return l},R=e=>o(Xl,{isTopMenu:n.isTopMenu,isSideMenu:n.isSideMenu,themeMode:n.themeMode},null),A=e=>o(Zl,{full:!1,title:Ol.domTitle,layoutMode:n.layoutMode,collapsed:n.collapsed,themeMode:n.themeMode,isSideMenu:n.isSideMenu,isMobile:n.isMobile},null),z=e=>{if("mix"===e.layout&&!e.isMobile)return o("div",{style:"width: 100%; height: 5px"},null)},j=e=>{n.toggleCollapsed(!0)},E=e=>{n.isMobile&&n.toggleCollapsed(!0)},N=e=>{if(e.length>0){const l=e.pop(),a=_(C),t=P.value[P.value.length-1];S.value=(P.value.includes(l)?M(t,a):M(l,a))||e}};return f((()=>{!n.isMobile&&n.isMixMenu&&n.toggleCollapsed(!1),!n.isMobile&&n.isTopMenu&&n.toggleCollapsed(!0),!n.isMobile&&n.collapsed&&(I.value=[])})),v(e,(()=>{T.value=!n.collapsed&&!n.isTopMenu||n.isMobile,S.value=e.matched.map((e=>e.path)).filter((e=>"/"!==e)),P.value=e.matched.map((e=>e.path)).filter((e=>"/"!==e)),I.value=e.matched.map((e=>e.path)).filter((e=>"/"!==e&&T.value))})),y((()=>{k.disconnect()})),b((()=>{h.value&&k.observe(h.value)})),()=>o(Ce,{theme:n.themeMode,layout:n.layoutMode,iconPrefix:n.iconPrefix,iconfontUrl:n.iconfontUrl,fixedHeader:n.fixedHeader,fixSiderbar:n.fixedSidebar,contentWidth:n.contentWidth,primaryColor:n.primaryColor,headerTheme:"realDark"!==n.themeMode?n.themeMode:"dark",menuData:C.value,collapsed:n.collapsed,siderWidth:d.value,splitMenus:s.value,headerHeight:c.value,contentStyle:w.value,collapsedWidth:g.value,selectedKeys:S.value,"onUpdate:selectedKeys":e=>S.value=e,openKeys:I.value,"onUpdate:openKeys":e=>I.value=e,onMenuClick:E,onCollapse:E,onSelect:N},{default:()=>[o("div",{class:"page-router-view-navigate",style:{position:"sticky",left:0}},[o(Yl,{multiTab:n.multiTab,isMixMenu:n.isMixMenu,hideMixHeaderTab:n.hideMixHeaderTab},null),o(Bl,{multiTab:n.multiTab,isMixMenu:n.isMixMenu,hideMixHeaderTab:n.hideMixHeaderTab},null)]),o("div",{class:"page-router-view-container",style:{width:"100%",maxWidth:n.isTopMenu&&n.isFixed?"1200px":"none",height:n.isMixMenu&&!n.hideMixHeaderTab&&n.fixedHeaderTab||!n.isMixMenu&&n.fixedHeader&&n.fixedHeaderTab?"calc(100vh - 89px)":"auto",overflow:n.isMixMenu&&!n.hideMixHeaderTab&&n.fixedHeaderTab||!n.isMixMenu&&n.fixedHeader&&n.fixedHeaderTab?"auto":"visible",position:n.isMixMenu||n.fixedHeader?"absolute":"relative",margin:"0px auto",padding:"0px 0px",zIndex:1,right:0,left:0}},[o(r,null,{default:e=>o(x,{include:n.multiTab&&n.keepAlive?i.cacheTags:[]},[e.Component?o(e.Component,null,null):null])})]),o("div",{class:"page-router-view-settings"},[o(Wl,null,null)])],headerRender:O,menuHeaderRender:A,menuExtraRender:z,rightContentRender:R})}}),ea=Object.freeze(Object.defineProperty({__proto__:null,default:Jl},Symbol.toStringTag,{value:"Module"})),la=e=>{let l="";const a=e.path,t={...e.meta},o={...e.query},r={...e.params};if(l=/^\/external\/link(\/.*)?/.test(a)?o.from:t.external,l===o.from&&delete o.from,l){/^file:\/\/\/|^https?:\/\//.test(l)?(l=l.replace(/^([^?]*)\/$/,"$1"),l=l.replace(/^([^?]*)\/(?=\?)/,"$1")):/^\/\/\/.+/.test(l)?(l=l.replace(/^([^?]*)\/$/,"$1"),l=l.replace(/^([^?]*)\/(?=\?)/,"$1"),l="file:"+l):/^\/\/.+/.test(l)?(l=l.replace(/^([^?]*)\/$/,"$1"),l=l.replace(/^([^?]*)\/(?=\?)/,"$1"),l=window.location.protocol+l):/^\/.+/.test(l)?(l=l.replace(/^\//,""),l=l.replace(/^([^?]*)\/$/,"$1"),l=l.replace(/^([^?]*)\/(?=\?)/,"$1"),l=window.location.protocol+"//"+window.location.host+"/"+l):/\w+/.test(l)&&(l=l.replace(/^([^?]*)\/$/,"$1"),l=l.replace(/^([^?]*)\/(?=\?)/,"$1"),l=window.location.protocol+"//"+l);const e=new URL(l),t=e.search,n=e.origin,i=new URLSearchParams(t);let s=e.pathname.replace(/\/+$/,"");if("/external/link"!==a){for(const e in o)void 0!==o[e]&&null!==o[e]&&i.set(e,o[e]);"string"==typeof r.path&&(s=s+"/"+r.path,s.replace(/\/+/,"/"),s.replace(/\/+$/,""))}i.sort(),l=n+s+"?"+i.toString()}return l||""},aa=t({name:"PageFrame",setup(){const e=p(),a=Rl(),t=la(e),r=l(!0),n=l(null);return b((()=>{n.value&&(n.value.onload=()=>{r.value=!1}),setTimeout((()=>{r.value=!1}),1e4)})),()=>o("div",{class:"page-frame-container",style:{margin:"0",padding:"0.5px",position:"absolute",boxSizing:"border-box",...a.layoutViewStyle}},[o(fe,{size:"large",tip:"正在加载访问中...",wrapperClassName:"ant-spin-wrapper",spinning:r.value},{default:()=>[o("iframe",{ref:n,width:"100%",height:"100%",scrolling:"yes",frameborder:"0",src:t},null)]})])}}),ta=Object.freeze(Object.defineProperty({__proto__:null,default:aa},Symbol.toStringTag,{value:"Module"})),oa={rootRoute:{key:"Basic",name:"Basic",path:"/",redirect:"/index",component:Jl,meta:{title:"首页"},children:[]},externalRoute:{key:"ExternalLink",name:"ExternalLink",path:"/external/link/:path(.*)?",component:aa,meta:{title:"外部链接",match:"external",external:"",componentName:"ExternalLink",hideChildInMenu:!0,hideInMenu:!0,allowCache:!0}},notFoundRoutes:[{name:"PageError403",path:"/PageError403",component:()=>Ul((()=>Promise.resolve().then((()=>Ca))),void 0)},{name:"PageError404",path:"/PageError404",component:()=>Ul((()=>Promise.resolve().then((()=>Pa))),void 0)},{name:"PageError500",path:"/PageError500",component:()=>Ul((()=>Promise.resolve().then((()=>Oa))),void 0)},{path:"/:catchAll(.*)",redirect:"/PageError404"}],constantRoutes:[]},ra=e=>{e.directive("action",{created:async(e,l)=>{const a=l.arg,t=k(Ql().userRole),o=q.currentRoute.value.meta.permission,r=Array.isArray(o)?o:[o];for(const n of t.permissions){if(!r||!r.length)return;if(r.includes(n.permissionId))return void(n.actionList&&n.actionList.includes(a)||e.parentNode&&e.parentNode.removeChild(e)||(e.style.display="none"))}}})},na=$().use(W),ia=t({name:"BlankLayout",setup:()=>()=>o(r,null,null)}),sa=Object.freeze(Object.defineProperty({__proto__:null,default:ia},Symbol.toStringTag,{value:"Module"})),da=t({name:"PageView",setup(){const e=Hl(),l=Rl(),t=a((()=>{const e=p();return"external"!==((e.meta||{}).match||"path")?e.fullPath:la(e)}));return()=>o("div",{class:"page-view-container",style:{width:"100%",height:"100%",margin:"0",padding:"0.5px",position:"relative",boxSizing:"border-box"}},[o(r,null,{default:a=>o(x,{include:l.multiTab&&l.keepAlive?e.cacheTags:[]},[a.Component?o(a.Component,{key:t.value},null):null])})])}}),ua=Object.freeze(Object.defineProperty({__proto__:null,default:da},Symbol.toStringTag,{value:"Module"})),ca=t({name:"RouteView",setup(){const e=Hl(),l=Rl(),t=a((()=>{const e=p();return"external"!==((e.meta||{}).match||"path")?e.fullPath:la(e)}));return()=>o("div",{class:"route-view-container"},[o(r,null,{default:a=>o(x,{include:l.multiTab&&l.keepAlive?e.cacheTags:[]},[a.Component?o(a.Component,{key:t.value},null):null])})])}}),pa=Object.freeze(Object.defineProperty({__proto__:null,default:ca},Symbol.toStringTag,{value:"Module"})),va=(e,l,a)=>{e.forEach((t=>{if(t.parentId===a.id){const a={...t,children:[]};va(e,a.children,t),a.children.length<=0&&delete a.children,l.push(a)}})),l.sort(((e,l)=>{const a=e.sort===1/0||Number.isFinite(+e.sort)?e.sort:-1,t=l.sort===1/0||Number.isFinite(+l.sort)?l.sort:-1;return a-t<0?-1:a-t>0?1:0}))},ma=(e,l={},a={})=>e.map((e=>{var t,o;const{icon:r,title:n,target:i,allowCache:s,hideInMenu:d,hideChildInMenu:u}=e.meta||{};e.component===da&&(e.component="PageView"),e.component===aa&&(e.component="PageFrame"),e.component===ca&&(e.component="RouteView");const c=null==(t=l.meta)?void 0:t.allowCache,p="PageFrame"===e.component,v=["PageView","RouteView"].includes(e.component),m="PageFrame"===e.component?"external":"path",g={id:e.id,name:e.name||"",path:ga(l,e),component:ha(l,e,a),redirect:e.redirect&&e.redirect.trim(),meta:{icon:r,title:n,match:m,target:i??(v?"none":void 0),groupId:(l.meta||{}).groupId||e.id,external:p&&e.path||"",componentName:e.component||e.name||"",hideChildInMenu:!0===d||"Y"===d||!0===u||"Y"===u,allowCache:!1!==c&&"N"!==c||!1!==s&&"N"!==s,hideInMenu:!0===d||"Y"===d,permission:e.name&&[e.name]||[]}};return r||delete g.meta.icon,p&&(g.path=g.path.replace(/\/+$/,"")+"/:path(.*)?"),g.redirect||delete g.redirect,g.path.startsWith("http")||(g.path=g.path.replace(/^\/+/,"/")),e.children&&e.children.length>0&&(g.children=ma(e.children,g,a)),!g.meta.hideChildInMenu&&(null==(o=g.children)?void 0:o.every((e=>e.meta&&e.meta.hideInMenu)))&&(g.meta.hideChildInMenu=!0),g})),ga=(e={},l={})=>{var a,t,o;const r=/\/+$/,n=/^\/*/,i=(null==(a=l.name)?void 0:a.replace(r,""))??"",s=(null==(t=l.path)?void 0:t.replace(/(.+?)\/*$/,"$1"))??"",d=(null==(o=e.path)?void 0:o.replace(r,""))??"",u="PageFrame"===l.component;return!u&&/^https?:\/\/.+|^\/.+/i.test(s)?s:u||s?!u&&s?(d+"/"+s).replace(n,"/"):u&&!i?s:u&&i?(d+"/"+i).replace(n,"/"):"":(d+"/"+i).replace(n,"/")},ha=(e={},l={},a={})=>{var t,o;const r=(null==(t=l.path)?void 0:t.replace(/(.+?)\/*$/,"$1"))||"",n=(null==(o=e.path)?void 0:o.replace(/\/+$/,""))||"",i=((null==r?void 0:r.startsWith("/"))?r:n+"/"+r).replace(/^\/*([^/].*)/,"/$1"),s=Object.assign({"/src/views/auth/Login.vue":()=>Ul((()=>Promise.resolve().then((()=>Da))),void 0),"/src/views/error/PageError403.vue":()=>Ul((()=>Promise.resolve().then((()=>Ca))),void 0),"/src/views/error/PageError404.vue":()=>Ul((()=>Promise.resolve().then((()=>Pa))),void 0),"/src/views/error/PageError500.vue":()=>Ul((()=>Promise.resolve().then((()=>Oa))),void 0),"/src/views/system/OrganizeManage.vue":()=>Ul((()=>Promise.resolve().then((()=>Mt))),void 0),"/src/views/system/ResourceManage.vue":()=>Ul((()=>Promise.resolve().then((()=>To))),void 0),"/src/views/system/RoleManage.vue":()=>Ul((()=>Promise.resolve().then((()=>vr))),void 0),"/src/views/system/UserManage.vue":()=>Ul((()=>Promise.resolve().then((()=>Hr))),void 0),"/src/views/system/components/OrganizeManage/OrganizeDrawer.vue":()=>Ul((()=>Promise.resolve().then((()=>_t))),void 0),"/src/views/system/components/OrganizeManage/OrganizeForm.vue":()=>Ul((()=>Promise.resolve().then((()=>vt))),void 0),"/src/views/system/components/OrganizeManage/OrganizeQuery.vue":()=>Ul((()=>Promise.resolve().then((()=>tt))),void 0),"/src/views/system/components/OrganizeManage/OrganizeTable.vue":()=>Ul((()=>Promise.resolve().then((()=>ut))),void 0),"/src/views/system/components/OrganizeManage/OrganizeTree.vue":()=>Ul((()=>Promise.resolve().then((()=>Ba))),void 0),"/src/views/system/components/ResourceManage/ButtonDrawer.vue":()=>Ul((()=>Promise.resolve().then((()=>Gt))),void 0),"/src/views/system/components/ResourceManage/ButtonForm.vue":()=>Ul((()=>Promise.resolve().then((()=>Nt))),void 0),"/src/views/system/components/ResourceManage/ButtonTable.vue":()=>Ul((()=>Promise.resolve().then((()=>Jt))),void 0),"/src/views/system/components/ResourceManage/MenuDrawer.vue":()=>Ul((()=>Promise.resolve().then((()=>vo))),void 0),"/src/views/system/components/ResourceManage/MenuForm.vue":()=>Ul((()=>Promise.resolve().then((()=>ao))),void 0),"/src/views/system/components/ResourceManage/MenuTable.vue":()=>Ul((()=>Promise.resolve().then((()=>fo))),void 0),"/src/views/system/components/ResourceManage/TreeMenu.vue":()=>Ul((()=>Promise.resolve().then((()=>xo))),void 0),"/src/views/system/components/RoleManage/RoleDrawer.vue":()=>Ul((()=>Promise.resolve().then((()=>sr))),void 0),"/src/views/system/components/RoleManage/RoleForm.vue":()=>Ul((()=>Promise.resolve().then((()=>tr))),void 0),"/src/views/system/components/RoleManage/RoleQuery.vue":()=>Ul((()=>Promise.resolve().then((()=>No))),void 0),"/src/views/system/components/RoleManage/RoleResource.vue":()=>Ul((()=>Promise.resolve().then((()=>Go))),void 0),"/src/views/system/components/RoleManage/RoleTable.vue":()=>Ul((()=>Promise.resolve().then((()=>er))),void 0),"/src/views/system/components/UserManage/UserDrawer.vue":()=>Ul((()=>Promise.resolve().then((()=>Vr))),void 0),"/src/views/system/components/UserManage/UserForm.vue":()=>Ul((()=>Promise.resolve().then((()=>zr))),void 0),"/src/views/system/components/UserManage/UserQuery.vue":()=>Ul((()=>Promise.resolve().then((()=>Cr))),void 0),"/src/views/system/components/UserManage/UserTable.vue":()=>Ul((()=>Promise.resolve().then((()=>Or))),void 0)});if(String(l.component)!==l.component)return l.component;if(a[l.component])return a[l.component];if(a[i])return a[i];return s[`/src/views/${i.replace(/^\/+|\.vue$/gi,"")}.vue`]},fa=(e,l,a=!0)=>(a?Kl({url:"/auth/loginUserMenu",method:"post",data:e}):Promise.resolve({code:"0000",message:null,result:[]})).then((e=>{var a;if("0000"!==e.code)return Promise.reject(e);const t=e.result,o=oa.rootRoute,r=oa.externalRoute,n=oa.notFoundRoutes,i=Array.from(o.children);va(t,i,{id:"0"});const s=[{...o,children:i}],d=ma(s,{},l);return null==(a=d[0].children)||a.unshift(r),d.push(...n),d})),ya=e=>{const l={},a=/^.*\/src\/layout\/(([^/]+\/?)+)\.(tsx|vue)$/,t=/^_.*|^\..*/;for(const[o,r]of Object.entries(e)){const e=o.replace(a,"$1");t.test(e)||l[e]||(l[e]=r.default||r)}return l},ba=e=>{const l={},a=/^.*\/src\/views(\/([^/]+\/?)+)\.(tsx|vue)$/,t=/^_.*|^\..*/;for(const[o,r]of Object.entries(e)){const e=o.replace(a,"$1");t.test(e)||l[e]||(l[e]=r)}return l},xa=H("router",(()=>{const e=l([]),a=l(oa.constantRoutes);return{dynamicRoutes:e,constantRoutes:a,generateRouter:async(l,a,t=!0)=>{e.value=await fa(l,a,t)}}})),_a={class:"page-container"},ka=(e,l)=>{const a=e.__vccOpts||e;for(const[t,o]of l)a[t]=o;return a},wa=ka(t({name:"PageError403",__name:"PageError403",setup:e=>(e,l)=>{const a=he,t=ye;return w(),C("div",_a,[o(t,{title:"403",status:"403",subTitle:"抱歉，您无权访问此页!"},{extra:T((()=>[o(a,{type:"primary",onClick:l[0]||(l[0]=l=>e.$router.push({path:"/index"}))},{default:T((()=>l[1]||(l[1]=[d(" 返回首页 ")]))),_:1})])),_:1})])}}),[["__scopeId","data-v-7cfb9f6e"]]),Ca=Object.freeze(Object.defineProperty({__proto__:null,default:wa},Symbol.toStringTag,{value:"Module"})),Ta={class:"page-container"},Sa=ka(t({name:"PageError404",__name:"PageError404",setup:e=>(e,l)=>{const a=he,t=ye;return w(),C("div",Ta,[o(t,{title:"404",status:"404",subTitle:"抱歉，您访问的页面不存在!"},{extra:T((()=>[o(a,{type:"primary",onClick:l[0]||(l[0]=l=>e.$router.push({path:"/index"}))},{default:T((()=>l[1]||(l[1]=[d(" 返回首页 ")]))),_:1})])),_:1})])}}),[["__scopeId","data-v-95ca0d39"]]),Pa=Object.freeze(Object.defineProperty({__proto__:null,default:Sa},Symbol.toStringTag,{value:"Module"})),Ia={class:"page-container"},Ma=ka(t({name:"PageError500",__name:"PageError500",setup:e=>(e,l)=>{const a=he,t=ye;return w(),C("div",Ia,[o(t,{title:"500",status:"500",subTitle:"抱歉，服务器反馈异常!"},{extra:T((()=>[o(a,{type:"primary",onClick:l[0]||(l[0]=l=>e.$router.push({path:"/index"}))},{default:T((()=>l[1]||(l[1]=[d(" 返回首页 ")]))),_:1})])),_:1})])}}),[["__scopeId","data-v-aa383fdf"]]),Oa=Object.freeze(Object.defineProperty({__proto__:null,default:Ma},Symbol.toStringTag,{value:"Module"})),Ra={class:"login-container"},Aa={class:"main"},za={class:"main-container"},ja={class:"main-content"},Ea={style:{padding:"1px",margin:"5px 0"}},Na={style:{padding:"1px"}},Fa={style:{padding:"0 5px",overflow:"hidden"}},Va=ka(t({name:"Login",__name:"Login",setup(t){const r=l(!1),n=Ql(),i=m(),s=e({username:"",password:"",rememberMe:!0}),u=e({username:[{required:!0,message:"请输入用户名"}],password:[{required:!0,message:"请输入密码"}]}),c=e({username:a((()=>"error"!==p.validateInfos.username.validateStatus)),password:a((()=>"error"!==p.validateInfos.password.validateStatus))}),p=pe.useForm(s,u),v=async()=>{try{await p.validate();const e=e=>{ce.success({message:"系统提示",duration:.8,description:"欢迎回来",onClose:()=>{r.value=!1,i.push({path:"/"})}})},l=e=>{e.message&&ce.error({message:"系统提示",duration:.8,description:e.message,onClose:()=>{r.value=!1}}),setTimeout((()=>{r.value=!1}),500)};return r.value=!0,n.login({...s,password:il(s.password)}).then(e).catch(l)}catch{}};return(e,l)=>{const a=be,t=ve,n=xe,i=he,u=pe;return w(),C("div",Ra,[S("div",Aa,[S("div",za,[l[5]||(l[5]=S("div",{class:"main-header"},[S("div",{class:"title"},[S("img",{src:fl,class:"logo",alt:"logo"}),S("span",null,"系统平台")]),S("div",{class:"description"},[S("span",null,"基于 Ant Design Vue v4.x 框架搭建")])],-1)),S("div",ja,[o(u,null,{default:T((()=>[S("div",Ea,[o(t,P(I(_(p).validateInfos.username)),{default:T((()=>[o(a,{value:_(s).username,"onUpdate:value":l[0]||(l[0]=e=>_(s).username=e),placeholder:"账号: admin",size:"large",type:"text",onPressEnter:v},{prefix:T((()=>[o(_(Ye),{style:M(_(c).username?{color:"#c0c0c0"}:{})},null,8,["style"])])),_:1},8,["value"])])),_:1},16)]),S("div",Na,[o(t,P(I(_(p).validateInfos.password)),{default:T((()=>[o(a,{value:_(s).password,"onUpdate:value":l[1]||(l[1]=e=>_(s).password=e),placeholder:"密码: 12345678",size:"large",type:"password",onPressEnter:v},{prefix:T((()=>[o(_(Ge),{style:M(_(c).password?{color:"#c0c0c0"}:{})},null,8,["style"])])),_:1},8,["value"])])),_:1},16)]),S("div",Fa,[o(n,{checked:_(s).rememberMe,"onUpdate:checked":l[2]||(l[2]=e=>_(s).rememberMe=e)},{default:T((()=>l[3]||(l[3]=[d(" 自动登录 ")]))),_:1},8,["checked"])]),o(t,{style:{margin:"30px 0 0"}},{default:T((()=>[o(i,{size:"large",type:"primary",class:"login-button",loading:_(r),disabled:_(r),onClick:v},{default:T((()=>l[4]||(l[4]=[d(" 登录 ")]))),_:1},8,["loading","disabled"])])),_:1})])),_:1})])])]),l[6]||(l[6]=S("div",{class:"footer"},[S("div",{class:"copyright"}," Copyright © 2024 Antd-Templater ")],-1))])}}}),[["__scopeId","data-v-f2be4ed3"]]),Da=Object.freeze(Object.defineProperty({__proto__:null,default:Va},Symbol.toStringTag,{value:"Module"})),Ua=(e,l)=>{if(ul(l)||cl(l))for(const a of e){if(l===a.value)return a||null;if(sl(a.children)){const e=Ua(a.children,l);if(e)return e}}return null},La=(e,l,a="label")=>{const t=Ua(e,l);if(sl(a)){for(const e of a){const l=null==t?void 0:t[e];if(ul(l)||cl(l))return l}return l}if(ul(a)){const e=null==t?void 0:t[a],o=ul(e),r=cl(e);return o||r?e:l}return l},qa=(e="",l={},a,t)=>sl(t)?{action:e,params:l,sorter:t.filter((e=>e.field&&e.value)).map((e=>({field:e.field.replace(/(^|\B)([A-Z])/g,"_$2").toLowerCase(),value:e.value.replace(/(^|\B)([A-Z])/g,"_$2").toLowerCase()}))),pageSize:(null==a?void 0:a.pageSize)??void 0,pageNo:(null==a?void 0:a.pageNo)??void 0}:dl(t)&&ul(t.field)&&ul(t.value)?{action:e,params:l,sorter:{field:t.field.replace(/(^|\B)([A-Z])/g,"_$2").toLowerCase(),value:t.value.replace(/(^|\B)([A-Z])/g,"_$2").toLowerCase()},pageSize:(null==a?void 0:a.pageSize)??void 0,pageNo:(null==a?void 0:a.pageNo)??void 0}:{action:e,params:l,sorter:void 0,pageSize:(null==a?void 0:a.pageSize)??void 0,pageNo:(null==a?void 0:a.pageNo)??void 0};function Ha(e){return Kl({url:"/organize/modifyOrganizeInfo",method:"post",data:e})}const $a={class:"organize-tree-container"},Wa=ka(t({name:"OrganizeTree",inheritAttrs:!1,__name:"OrganizeTree",emits:["queryTable","selectedNode","addRecord"],setup(e,{expose:a,emit:t}){const r={display:"flex",flexFlow:"column nowrap",flex:"1 1 auto",width:"100%",height:"100%",overflow:"hidden"},n={display:"flex",padding:"15px 10px",flexFlow:"column nowrap",flex:"1 1 auto",position:"relative",overflow:"auto"},i={flex:"0 0 auto",overflow:"hidden"},s=t,d=l(null),u=l([]),c=l(!1),p=l([]),v=l([]),m=l([]),g=l({children:"children",title:"title",key:"key"}),h=e=>{if(!c.value){c.value=!0;const e=[],l=[...m.value],a=[...v.value],t=new Set(["0",...p.value]);p.value=[],m.value=[],v.value=[];for(const o of t){const l=Promise.resolve(x({key:o})).then((e=>({parent:"0"!==o?{key:o}:null,children:e||[]})));e.push(l.catch((()=>{})))}return Promise.all(e).then((e=>{var o,r,n,i;for(const l of e)l&&(null==(r=d.value)||r.reloadTreeNodes(l.children,null==(o=l.parent)?void 0:o.key));null==(n=d.value)||n.doTreeOnlyExpanded(l),null==(i=d.value)||i.doTreeSelected(a),p.value=[...t],c.value=!1}))}},f=Ie((e=>{var l,a;s("selectedNode",e.selectedNode),s("queryTable",{orgId:"Y"===(null==(l=e.selectedNode)?void 0:l.isOrg)?e.selectedNode.key:"",deptId:"N"===(null==(a=e.selectedNode)?void 0:a.isOrg)?e.selectedNode.key:""})})),y=Me((e=>{p.value=[...e.loadedKeys]})),x=Pe((e=>{const l=qa("",{orgId:e.key},null,null);return(a=l,Kl({url:"/organize/getOrganizeInfoTree",method:"post",data:a})).then((e=>"0000"!==e.code?Promise.reject():e.result));var a}));return b((()=>{h()})),a({doRefresh:h}),(e,l)=>{const a=Ke,t=he,p=Qe,b=O("STree"),k=_e;return w(),C("section",$a,[o(k,{title:"组织列表",style:r,bodyStyle:n,headStyle:i,bordered:!1},{extra:T((()=>[o(t,{ghost:"",type:"primary",style:{margin:"0 5px"},onClick:l[0]||(l[0]=e=>{s("addRecord")})},{icon:T((()=>[o(a)])),_:1}),o(t,{ghost:"",type:"primary",style:{margin:"0 5px"},onClick:l[1]||(l[1]=e=>h())},{icon:T((()=>[o(p)])),_:1})])),default:T((()=>[o(b,{ref_key:"tree",ref:d,treeData:_(u),"onUpdate:treeData":l[2]||(l[2]=e=>R(u)?u.value=e:null),expandedKeys:_(m),"onUpdate:expandedKeys":l[3]||(l[3]=e=>R(m)?m.value=e:null),selectedKeys:_(v),"onUpdate:selectedKeys":l[4]||(l[4]=e=>R(v)?v.value=e:null),fieldNames:_(g),allowAutoExpandLoad:!0,allowAutoExpanded:!0,allowSelectedLevel:1,allowCheckedLevel:1,selectable:!0,checkable:!1,showIcon:!1,showLine:!1,tooltip:!0,blockNode:!0,loading:_(c),loadData:_(x),onChange:_(y),onSelect:_(f)},null,8,["treeData","expandedKeys","selectedKeys","fieldNames","loading","loadData","onChange","onSelect"])])),_:1})])}}}),[["__scopeId","data-v-dd5b734d"]]),Ba=Object.freeze(Object.defineProperty({__proto__:null,default:Wa},Symbol.toStringTag,{value:"Module"})),Ya={class:"organize-query-container"},Ga={class:"flex-row-auto"},Ka={class:"flex-row-none"},Qa={class:"flex-row-auto"},Xa={style:{flex:"1 1 auto"}},Za={style:{flex:"0 0 auto"}},Ja={key:0,class:"form-inline-more"},et={class:"flex-row-none",style:{width:"210px"}},lt={class:"flex-row-auto"},at=ka(t({name:"OrganizeQuery",inheritAttrs:!1,__name:"OrganizeQuery",emits:["addRecord","queryTable"],setup(e,{emit:t}){A((e=>({"2f5f044f":_(c),"540e670c":_(p)})));const r=l(!1),n=t,i=ke(),s=l({title:"",activity:""}),u=a((()=>{var e;return(null==(e=i.componentSize)?void 0:e.value)??"middle"})),c=a((()=>"large"===u.value?"412px":"middle"===u.value?"368px":"330px")),p=a((()=>"large"===u.value?"414px":"middle"===u.value?"370px":"332px")),v=()=>{n("addRecord")},m=()=>{n("queryTable",s.value)},g=()=>{r.value=!r.value};return(e,l)=>{const a=Xe,t=he,n=we,i=ve,c=Ze,p=Ke,h=ee,f=le,y=pe,b=z("action");return w(),C("section",Ya,[o(y,{layout:"inline"},{default:T((()=>[S("div",Ga,[S("div",Ka,[o(i,{label:"组织/部门",style:M({width:"large"===_(u)?"385px":"middle"===_(u)?"345px":"312px"})},{default:T((()=>[o(n,{value:_(s).title,"onUpdate:value":l[0]||(l[0]=e=>_(s).title=e),placeholder:"请输入组织/部门名称",allowClear:"",onSearch:m},{enterButton:T((()=>[o(t,null,{icon:T((()=>[o(a,{style:{color:"var(--ant-primary-color)"}})])),_:1})])),_:1},8,["value"])])),_:1},8,["style"])]),S("div",Qa,[S("div",Xa,[o(t,{onClick:g},{icon:T((()=>[o(c,{style:{color:"var(--ant-primary-color)"}})])),_:1})]),S("div",Za,[j((w(),E(t,{type:"primary",onClick:v},{icon:T((()=>[o(p)])),default:T((()=>[l[3]||(l[3]=S("span",null,"新增",-1))])),_:1})),[[b,void 0,"add"]])])])]),_(r)?(w(),C("div",Ja,[S("div",et,[o(i,{label:"组织状态",style:{"margin-bottom":"0"}},{default:T((()=>[o(f,{value:_(s).activity,"onUpdate:value":l[1]||(l[1]=e=>_(s).activity=e),placeholder:"请选择组织状态",onChange:m},{default:T((()=>[o(h,{value:""},{default:T((()=>l[4]||(l[4]=[d(" 全部 ")]))),_:1}),o(h,{value:"Y"},{default:T((()=>l[5]||(l[5]=[d(" 启用 ")]))),_:1}),o(h,{value:"N"},{default:T((()=>l[6]||(l[6]=[d(" 禁用 ")]))),_:1})])),_:1},8,["value"])])),_:1})]),S("div",lt,[o(t,{type:"primary",style:{margin:"0 8px"},onClick:m},{default:T((()=>l[7]||(l[7]=[d(" 查询 ")]))),_:1}),o(t,{style:{margin:"0 8px"},onClick:l[2]||(l[2]=e=>(s.value.title="",s.value.activity="",void m()))},{default:T((()=>l[8]||(l[8]=[d(" 重置 ")]))),_:1})])])):N("",!0)])),_:1})])}}}),[["__scopeId","data-v-5904f8c0"]]),tt=Object.freeze(Object.defineProperty({__proto__:null,default:at},Symbol.toStringTag,{value:"Module"})),ot={class:"organize-table-container"},rt={key:0},nt={key:1},it={key:2},st=["onClick"],dt=ka(t({name:"OrganizeTable",inheritAttrs:!1,__name:"OrganizeTable",props:{dictionary:{}},emits:["editRecord"],setup(e,{expose:a,emit:t}){const r=e,n=t,i=l(null),s=l({title:"",orgId:"",deptId:"",activity:""}),d=Oe({topHeader:0,leftFooter:!1,rightFooter:!1,bottomFooter:!1,bottomScrollbar:!0}),u=Re({scrollToFirstXOnChange:!0,scrollToFirstYOnChange:!0,overflow:"visible",x:"max-content"}),c=Ae([{title:"序号",dataIndex:"serial",align:"center",maxWidth:60,width:60},{title:"名称",dataIndex:"title",tooltip:!0,fixed:"left"},{title:"简称",dataIndex:"orgShortName"},{title:"编码",dataIndex:"key"},{title:"上级单位",dataIndex:"parentOrgName",tooltip:!0},{title:"形态",dataIndex:"isOrg",width:100},{title:"可用状态",dataIndex:"activity",align:"center",width:90},{title:"操作",dataIndex:"action",align:"center",fixed:"right",width:80}]),p=ze({pageNo:1,pageSize:20,totalPage:0,totalSize:0,showSizeChanger:!0,showTotal:!0,visible:!0,fixed:!0}),v=je((e=>{const l=qa("",s.value,e.paginate,e.sorter);return(a=l,Kl({url:"/organize/getOrganizeInfoList",method:"post",data:a})).then((e=>"0000"!==e.code?(ce.error({message:"系统消息",description:e.message||"组织机构查询失败!"}),Promise.reject(e)):e));var a})),m=e=>{var l;null==(l=i.value)||l.refresh(e)};return a({doTableRefresh:m,queryParams:s}),(e,l)=>{const a=ae,t=O("STable");return w(),C("section",ot,[o(t,{ref_key:"table",ref:i,columns:_(c),"onUpdate:columns":l[0]||(l[0]=e=>R(c)?c.value=e:null),paginate:_(p),"onUpdate:paginate":l[1]||(l[1]=e=>R(p)?p.value=e:null),columnPresetResizable:!0,loadData:_(v),bodyMinRows:!0,immediate:!1,border:!1,scroll:_(u),sticky:_(d),rowKey:"key"},{bodyerCell:T((({column:e,record:l,value:t,groupIndex:o})=>["serial"===e.key?(w(),C("span",rt,F(o+1),1)):N("",!0),"parentOrgName"===e.key?(w(),C("span",nt,F(_(La)(r.dictionary.orgTree,t)),1)):N("",!0),"isOrg"===e.key?(w(),C("span",it,F(_(La)(r.dictionary.isOrg,t)),1)):N("",!0),"activity"===e.key?(w(),E(a,{key:3,checked:t,checkedValue:"Y",unCheckedValue:"N",checkedChildren:"开",unCheckedChildren:"关",onChange:e=>((e,l,a)=>{var t;return e[l]=a,null==(t=i.value)||t.update(),Ha(qa("update",e)).then((e=>{if("0000"!==e.code)return ce.error({message:"系统消息",description:"修改失败"}),Promise.reject(e);ce.success({message:"系统消息",description:"修改成功"}),m()}))})(l,"activity",e)},null,8,["checked","onChange"])):N("",!0),"action"===e.key?(w(),C("a",{key:4,href:"javascript: void(0)",style:{"font-weight":"500",display:"inline-block",margin:"0 7px"},onClick:e=>(e=>{n("editRecord",e)})(l)}," 修改 ",8,st)):N("",!0)])),_:1},8,["columns","paginate","loadData","scroll","sticky"])])}}}),[["__scopeId","data-v-bf0d0a64"]]),ut=Object.freeze(Object.defineProperty({__proto__:null,default:dt},Symbol.toStringTag,{value:"Module"})),ct={class:"organize-form-container"},pt=ka(t({name:"OrganizeForm",inheritAttrs:!1,__name:"OrganizeForm",props:{dictionary:{},disabled:{type:Boolean},readonly:{type:Boolean},loading:{type:Boolean}},setup(e,{expose:t}){const r=l(null),n=e,i=a((()=>n.loading)),s=l({}),d=l(""),u=Ee([{type:"AGroup",slot:"",field:"AGroup-1",label:""},{type:"AInputTextarea",slot:"title",field:"title",label:"名称",props:{rows:1,autoSize:!0,placeholder:"请输入名称"}},{type:"AInput",slot:"orgShortName",field:"orgShortName",label:"简称",props:{placeholder:"请输入简称"}},{type:"ASelect",slot:"isOrg",field:"isOrg",label:"形态",props:{placeholder:"请选择组织形态",options:n.dictionary.isOrg}},{type:"ATreeSelect",slot:"parentOrgId",field:"parentOrgId",label:"上级",props:{popupClassName:"text-ellipsis",dropdownStyle:{maxHeight:"300px"},allowClear:!0,showSearch:!0,treeDefaultExpandAll:!0,dropdownMatchSelectWidth:!0,treeNodeFilterProp:"label",placeholder:"请选择上级",treeData:n.dictionary.orgTree},transfer:{input:e=>"0"!==e?e:"",output:e=>e||"0"}},{type:"AGroup",slot:"AGroup-2",field:"AGroup-2",label:"",border:!0,grid:{}},{type:"ASwitch",slot:"activity",field:"activity",label:"状态",props:{checkedValue:"Y",unCheckedValue:"N",checkedChildren:"开",unCheckedChildren:"关"}}]),c=Ne({title:[{required:!0,message:"请输入名称"}],isOrg:[{required:!0,message:"请选择形态"}],orgShortName:[{required:!0,message:"请输入简称"}]}),p=Fe({gutter:8,xs:24});return t({validateFields:(...e)=>{var l;return null==(l=r.value)?void 0:l.validateFields(...e).then((()=>({action:d.value,record:s.value})))},resetFields:(...e)=>{var l;return null==(l=r.value)?void 0:l.resetFields(...e)},doCreate:(e,l)=>{d.value=e,s.value=l},doClose:()=>{d.value="",s.value={}}}),(e,l)=>{const a=O("SForm");return w(),C("section",ct,[o(a,{ref_key:"form",ref:r,modelValue:_(s),"onUpdate:modelValue":l[0]||(l[0]=e=>R(s)?s.value=e:null),disabled:e.disabled,readonly:e.readonly,spinning:_(i),groups:_(u),rules:_(c),grid:_(p)},null,8,["modelValue","disabled","readonly","spinning","groups","rules","grid"])])}}}),[["__scopeId","data-v-03fe72dc"]]),vt=Object.freeze(Object.defineProperty({__proto__:null,default:pt},Symbol.toStringTag,{value:"Module"})),mt={class:"organize-drawer-container"},gt={class:"readonly-container"},ht={class:"readonly-item"},ft={class:"value"},yt={class:"drawer-body-footer"},bt={class:"drawer-body-footer-fixed"},xt=ka(t({name:"OrganizeDrawer",inheritAttrs:!1,__name:"OrganizeDrawer",props:{dictionary:{}},emits:["submitted","closed"],setup(e,{expose:a,emit:t}){const r=t,n=e,i=l(null),s=l(""),u=l(""),c=l({key:""}),p=l(!1),v=l(!1),m=l(!1),g=l(!1),h=l(!1),f=()=>{var e,l;null==(l=null==(e=i.value)?void 0:e.validateFields())||l.then((({action:e,record:l})=>{if(!m.value){m.value=!0;const t={error:"insert"===e?"新增失败!":"更新失败!",success:"insert"===e?"新增成功!":"更新成功!"},o="insert"===e?(a=qa(e,l),Kl({url:"/organize/addOrganizeInfo",method:"post",data:a})):Ha(qa(e,l));return o.finally((()=>{m.value=!1})),o.then((e=>{"0000"!==e.code?ce.error({message:"系统消息",description:e.message||t.error}):ce.success({message:"系统消息",description:t.success});const a="0000"!==e.code?Promise.reject(e):l;return r("submitted"),y(),a}))}var a}))},y=()=>{var e;h.value&&(s.value="",u.value="",c.value={key:""},v.value=!1,p.value=!1,m.value=!1,g.value=!1,h.value=!1,null==(e=i.value)||e.doClose(),r("closed"))};return a({doEdit:e=>{s.value="修改",u.value="update",v.value=!1,p.value=!1,g.value=!1,h.value=!0,c.value=Object.assign({parentOrgId:"0",activity:"Y",isOrg:"Y"},e),V((()=>{var e;null==(e=i.value)||e.doCreate("update",c.value)}))},doAdd:e=>{s.value="新增",u.value="insert",v.value=!1,p.value=!1,g.value=!0,h.value=!0,c.value=Object.assign({parentOrgId:"0",activity:"Y",isOrg:"Y"},e),V((()=>{var e;null==(e=i.value)||e.doCreate("insert",c.value)}))}}),(e,l)=>{const a=Y,t=he,r=B;return w(),C("section",mt,[o(r,{width:"400",open:_(h),title:_(s),zIndex:1010,forceRender:!1,maskClosable:!0,destroyOnClose:!0,placement:"right",onClose:l[2]||(l[2]=e=>y())},{default:T((()=>[S("div",gt,[S("div",ht,[l[3]||(l[3]=S("span",{class:"name"},"编码:",-1)),S("span",ft,F(_(c).key||"由系统生成"),1)])]),o(a,{dashed:!0,style:{margin:"16px  0 20px"}}),o(pt,{ref_key:"form",ref:i,dictionary:n.dictionary,disabled:_(v),readonly:_(p),loading:_(m)},null,8,["dictionary","disabled","readonly","loading"]),S("div",yt,[S("div",bt,[o(t,{onClick:l[0]||(l[0]=e=>y())},{default:T((()=>l[4]||(l[4]=[d(" 取消 ")]))),_:1}),o(t,{type:"primary",loading:_(m),onClick:l[1]||(l[1]=e=>f())},{default:T((()=>l[5]||(l[5]=[d(" 保存 ")]))),_:1},8,["loading"])])])])),_:1},8,["open","title"])])}}}),[["__scopeId","data-v-df385c3f"]]),_t=Object.freeze(Object.defineProperty({__proto__:null,default:xt},Symbol.toStringTag,{value:"Module"}));function kt(e){return Kl({url:"/base/getTreeById",method:"post",data:e})}const wt={class:"section-container"},Ct={class:"section-left-tree"},Tt={class:"section-right-container"},St={class:"section-query-container"},Pt={class:"section-table-container"},It=ka(t({name:"OrganizeManage",inheritAttrs:!1,__name:"OrganizeManage",setup(e){A((e=>({"14b01256":_(p).layoutViewStyle.minHeight})));const a={display:"flex",flexFlow:"column nowrap",flex:"1 1 auto",width:"100%",height:"100%",overflow:"hidden"},t={flex:"0 0 auto",overflow:"hidden"},r={display:"flex",flexFlow:"column nowrap",flex:"1 1 auto",padding:"20px 24px 6px",overflow:"hidden",position:"relative"},n=l(null),i=l(null),s=l(null),d=l(null),u=l(null),c=l(!1),p=Rl(),v=l({orgTree:[],isOrg:[{label:"组织",value:"Y"},{label:"部门",value:"N"}]}),m=e=>{u.value=e},g=(e={})=>{i.value&&(i.value.queryParams={...i.value.queryParams,...e},i.value.doTableRefresh())},h=e=>{var l;null==(l=d.value)||l.doEdit(e)},f=()=>{var e,l;null==(l=d.value)||l.doAdd({parentOrgId:null==(e=u.value)?void 0:e.key})},y=()=>{var e;kt({id:"orgTree"}).then((e=>{if("0000"!==e.code)return Promise.reject(new Error);v.value.orgTree.splice(0),v.value.orgTree.push(...e.result)})),null==(e=n.value)||e.doRefresh()};return b((()=>{y()})),(e,l)=>{const u=_e,p=Je,b=el,x=he;return w(),C("section",wt,[S("div",{class:"section-left-container",style:M({width:_(c)?"0":"334px"})},[S("div",Ct,[o(Wa,{ref_key:"tree",ref:n,dictionary:_(v),onAddRecord:f,onSelectedNode:m,onQueryTable:g,onQueryAll:y},null,8,["dictionary"])])],4),S("div",Tt,[o(u,{style:a,headStyle:t,bodyStyle:r,bordered:!1},{default:T((()=>[S("div",St,[o(at,{ref_key:"query",ref:s,onQueryTable:g,onAddRecord:f},null,512)]),S("div",Pt,[o(dt,{ref_key:"table",ref:i,dictionary:_(v),onEditRecord:h},null,8,["dictionary"])])])),_:1}),o(x,{type:"link",class:"section-tree-collapse",onClick:l[0]||(l[0]=D((e=>c.value=!_(c)),["stop"]))},{icon:T((()=>[_(c)?(w(),E(p,{key:0})):N("",!0),_(c)?N("",!0):(w(),E(b,{key:1}))])),_:1})]),o(xt,{ref_key:"drawer",ref:d,dictionary:_(v),onSubmitted:g},null,8,["dictionary"])])}}}),[["__scopeId","data-v-3d882a56"]]),Mt=Object.freeze(Object.defineProperty({__proto__:null,default:It},Symbol.toStringTag,{value:"Module"}));function Ot(e){return Kl({url:"/resource/addResourceInfo",method:"post",data:e})}function Rt(e){return Kl({url:"/resource/getResourceListInfo",method:"post",data:e})}function At(e){return Kl({url:"/resource/modifyResourceInfo",method:"post",data:e})}function zt(e){return Kl({url:"/resource/deleteResourceInfo",method:"post",data:e})}const jt={class:"resource-button-form-container"},Et=ka(t({name:"ResourceButtonForm",inheritAttrs:!1,__name:"ButtonForm",props:{presetOptions:{},disabled:{type:Boolean},readonly:{type:Boolean},loading:{type:Boolean}},setup(e,{expose:t}){const r=l(null),n=e,i=a((()=>n.loading)),s=l({}),d=l(""),u=Ee([{type:"AGroup",slot:"",field:"AGroup-1",label:"",grid:{}},{type:"AInput",slot:"title",field:"title",label:"按钮名称",props:{placeholder:"请输入按钮名称",options:n.presetOptions.buttons}},{type:"AInput",slot:"resourceName",field:"resourceName",label:"按钮标识",props:{placeholder:"请输入按钮标识"}},{type:"AInput",slot:"sort",field:"sort",label:"按钮排序",props:{placeholder:"请输入按钮排序"}},{type:"AGroup",slot:"AGroup-2",field:"AGroup-2",border:!0,grid:{}},{type:"ASwitch",slot:"activity",field:"activity",label:"是否启用",props:{checkedValue:"Y",unCheckedValue:"N",checkedChildren:"开",unCheckedChildren:"关"}}]),c=Ne({title:[{required:!0,message:"请输入按钮名称"}],resourceName:[{required:!0,message:"请输入按钮标识"}],sort:[{required:!0,message:"请输入按钮排序"}]}),p=Fe({gutter:8,xs:24});return t({validateFields:(...e)=>{var l;return null==(l=r.value)?void 0:l.validateFields(...e).then((()=>({action:d.value,record:s.value})))},resetFields:(...e)=>{var l;return null==(l=r.value)?void 0:l.resetFields(...e)},doCreate:(e,l)=>{d.value=e,s.value=l},doClose:()=>{d.value="",s.value={}}}),(e,l)=>{const a=O("SForm");return w(),C("section",jt,[o(a,{ref_key:"form",ref:r,modelValue:_(s),"onUpdate:modelValue":l[0]||(l[0]=e=>R(s)?s.value=e:null),disabled:e.disabled,readonly:e.readonly,spinning:_(i),groups:_(u),rules:_(c),grid:_(p)},null,8,["modelValue","disabled","readonly","spinning","groups","rules","grid"])])}}}),[["__scopeId","data-v-bd4cc43d"]]),Nt=Object.freeze(Object.defineProperty({__proto__:null,default:Et},Symbol.toStringTag,{value:"Module"})),Ft={class:"resource-button-drawer-container"},Vt={class:"readonly-container"},Dt={class:"readonly-item"},Ut={class:"value"},Lt={class:"readonly-item"},qt={class:"value"},Ht={class:"readonly-item"},$t={class:"value"},Wt={class:"drawer-body-footer"},Bt={class:"drawer-body-footer-fixed"},Yt=ka(t({name:"ResourceButtonDrawer",inheritAttrs:!1,__name:"ButtonDrawer",props:{presetOptions:{}},emits:["submitted","deleted","closed"],setup(e,{expose:a,emit:t}){const r=e,n=t,i=l(null),s=l(""),u=l(""),c=l({}),p=l(!1),v=l(!1),m=l(!1),g=l(!1),h=l(!1),f=()=>{var e;h.value&&(s.value="",u.value="",c.value={},v.value=!1,p.value=!1,m.value=!1,g.value=!1,h.value=!1,null==(e=i.value)||e.doClose(),n("closed"))};return a({doEdit:e=>{s.value="修改按钮资源",u.value="update",v.value=!1,p.value=!1,g.value=!1,h.value=!0,c.value=Object.assign({resourceType:"b",activity:"Y"},e),V((()=>{var e;null==(e=i.value)||e.doCreate("update",c.value)}))},doAdd:e=>{s.value="添加按钮资源",u.value="insert",v.value=!1,p.value=!1,g.value=!0,h.value=!0,c.value=Object.assign({resourceType:"b",activity:"Y"},e),V((()=>{var e;null==(e=i.value)||e.doCreate("insert",c.value)}))},doDel:async e=>zt(qa("delete",e)).then((e=>{if("0000"!==e.code)return ce.error({message:"系统消息",description:e.message||"删除失败!"}),Promise.reject(e);ce.success({message:"系统消息",description:"删除成功!"}),n("deleted")}))}),(e,l)=>{const a=Y,t=he,u=B;return w(),C("section",Ft,[o(u,{width:"400",open:_(h),title:_(s),zIndex:1010,forceRender:!1,maskClosable:!0,destroyOnClose:!0,placement:"right",onClose:l[2]||(l[2]=e=>f())},{default:T((()=>[S("div",Vt,[S("div",Dt,[l[3]||(l[3]=S("span",{class:"name"},"按钮资源ID:",-1)),S("span",Ut,F(_(c).resourceId||"由系统生成"),1)]),S("div",Lt,[l[4]||(l[4]=S("span",{class:"name"},"所属菜单ID:",-1)),S("span",qt,F(_(c).parentId),1)]),S("div",Ht,[l[5]||(l[5]=S("span",{class:"name"},"所属菜单标识:",-1)),S("span",$t,F(_(c).component),1)])]),o(a,{dashed:!0}),o(Et,{ref_key:"form",ref:i,presetOptions:r.presetOptions,disabled:_(v),readonly:_(p),loading:_(m)},null,8,["presetOptions","disabled","readonly","loading"]),S("div",Wt,[S("div",Bt,[o(t,{onClick:l[0]||(l[0]=e=>f())},{default:T((()=>l[6]||(l[6]=[d(" 取消 ")]))),_:1}),o(t,{type:"primary",loading:_(m),onClick:l[1]||(l[1]=e=>{var l,a;null==(a=null==(l=i.value)?void 0:l.validateFields())||a.then((({action:e,record:l})=>{if(!m.value){m.value=!0;const a={error:"insert"===e?"新增失败!":"更新失败!",success:"insert"===e?"新增成功!":"更新成功!"},t="insert"===e?Ot(qa(e,l)):At(qa(e,l));return t.finally((()=>{m.value=!1})),t.then((e=>{"0000"!==e.code?ce.error({message:"系统消息",description:e.message||a.error}):ce.success({message:"系统消息",description:a.success});const t="0000"!==e.code?Promise.reject(e):l;return n("submitted"),f(),t}))}}))})},{default:T((()=>l[7]||(l[7]=[d(" 保存 ")]))),_:1},8,["loading"])])])])),_:1},8,["open","title"])])}}}),[["__scopeId","data-v-9b400767"]]),Gt=Object.freeze(Object.defineProperty({__proto__:null,default:Yt},Symbol.toStringTag,{value:"Module"})),Kt={class:"resource-button-table-container"},Qt={key:0},Xt=["onClick"],Zt=ka(t({name:"ResourceButtonTable",inheritAttrs:!1,__name:"ButtonTable",props:{parentNode:{}},setup(e,{expose:a}){const t=e,r=l(null),n=l(null),i=l({resourceType:"b",parentId:""}),s=l({buttons:[{label:"新增",value:"add",sort:1},{label:"删除",value:"del",sort:2},{label:"修改",value:"edit",sort:3},{label:"查询",value:"query",sort:4},{label:"重置",value:"reset",sort:5},{label:"上传",value:"upload",sort:6},{label:"上报",value:"up",sort:7},{label:"审批",value:"approve",sort:8},{label:"导出",value:"export",sort:9}]}),d={flex:"0 0 auto",overflow:"hidden"},u={flex:"1 1 auto",overflow:"auto",position:"relative",boxSizing:"border-box",padding:"20px"},c=l(!1),p=l(!1),v={container:{display:"inline-block",width:"auto"},inputWrapper:{display:"inline-block",maxWidth:"140px",paddingRight:"36px"},textWrapper:{display:"inline-block",width:"auto",paddingRight:"36px"}},m=Oe({topHeader:0,leftFooter:!1,rightFooter:!1,bottomFooter:!1,bottomScrollbar:!0}),g=Re({scrollToFirstXOnChange:!0,scrollToFirstYOnChange:!0,overflow:"visible",x:"max-content"}),h=Ae([{title:"序号",dataIndex:"serial",align:"center",maxWidth:60,width:60},{title:"按钮名称",dataIndex:"title"},{title:"按钮标识",dataIndex:"resourceName"},{title:"是否启用",dataIndex:"activity"},{title:"操作",dataIndex:"action",align:"center",width:80}]),f=ze({pageNo:1,pageSize:20,totalPage:0,totalSize:0,showSizeChanger:!0,showTotal:!0,visible:!0,fixed:!0}),y=je((async e=>Rt(qa("",i.value,e.paginate,e.sorter)).then((e=>"0000"!==e.code?(ce.error({message:"系统消息",description:e.message||"按钮资源查询失败!"}),Promise.reject(e)):e)))),b=(e,l,a)=>{var t;e[l]=a,null==(t=r.value)||t.update()},x=e=>At(qa("update",e)).then((e=>{if("0000"!==e.code)return ce.error({message:"系统消息",description:"修改失败"}),Promise.reject(e);ce.success({message:"系统消息",description:"修改成功"}),k()})),k=()=>{var e;p.value=!1,c.value=!1,null==(e=r.value)||e.refresh()},S=()=>{var e;null==(e=n.value)||e.doAdd({parentId:t.parentNode.resourceId,component:t.parentNode.component})};return a({queryParams:i,doTableRefresh:k,doTableReady:()=>{c.value=!0},doTableClear:()=>{var e;p.value=!1,c.value=!1,null==(e=r.value)||e.clear()}}),(e,l)=>{const a=Ke,t=he,i=O("SEditCellInput"),P=ae,I=O("STable"),M=_e;return w(),C("section",Kt,[o(M,{title:"按钮资源",style:{display:"flex","flex-flow":"column nowrap",height:"100%"},headStyle:d,bodyStyle:u,bordered:!1},{extra:T((()=>[e.parentNode.resourceId?(w(),E(t,{key:0,type:"primary",onClick:S},{icon:T((()=>[o(a)])),_:1})):N("",!0)])),default:T((()=>[o(I,{ref_key:"table",ref:r,loading:_(c),"onUpdate:loading":l[1]||(l[1]=e=>R(c)?c.value=e:null),columns:_(h),"onUpdate:columns":l[2]||(l[2]=e=>R(h)?h.value=e:null),paginate:_(f),"onUpdate:paginate":l[3]||(l[3]=e=>R(f)?f.value=e:null),style:{height:"100%",overflow:"auto"},columnPresetResizable:!0,loadData:_(y),bodyMinRows:!0,immediate:!1,border:!1,scroll:_(g),sticky:_(m),rowKey:"resourceId"},{bodyerCell:T((({column:e,record:a,value:t,groupIndex:o})=>["serial"===e.key?(w(),C("span",Qt,F(o+1),1)):N("",!0),"title"===e.key||"resourceName"===e.key?(w(),E(i,{key:1,status:_(p),"onUpdate:status":l[0]||(l[0]=e=>R(p)?p.value=e:null),cellStyle:v,text:t,onChange:l=>b(a,e.key,l.value),onConfirm:e=>x(a)},null,8,["status","text","onChange","onConfirm"])):N("",!0),"activity"===e.key?(w(),E(P,{key:2,checked:t,checkedValue:"Y",unCheckedValue:"N",checkedChildren:"开",unCheckedChildren:"关",onChange:e=>((e,l,a)=>{b(e,l,a),x(e)})(a,"activity",e)},null,8,["checked","onChange"])):N("",!0),"action"===e.key?(w(),C("a",{key:3,href:"javascript: void(0)",style:{display:"inline-block","font-weight":"500",margin:"0 7px",color:"#f44848"},onClick:D((e=>(e=>{ge.confirm({title:"是否确认删除该按钮资源?",content:"删除按钮资源会导致相关权限丢失，请慎重考虑!",cancelText:"取消",okText:"删除",okType:"danger",onOk:()=>{var l;null==(l=n.value)||l.doDel([e])}})})(a)),["stop"])}," 删除 ",8,Xt)):N("",!0)])),_:1},8,["loading","columns","paginate","loadData","scroll","sticky"])])),_:1}),o(Yt,{ref_key:"buttonDrawer",ref:n,presetOptions:_(s),onSubmitted:k,onDeleted:k},null,8,["presetOptions"])])}}}),[["__scopeId","data-v-069ef618"]]),Jt=Object.freeze(Object.defineProperty({__proto__:null,default:Zt},Symbol.toStringTag,{value:"Module"})),eo={class:"resource-menu-form-container"},lo=ka(t({name:"ResourceMenuForm",inheritAttrs:!1,__name:"MenuForm",props:{disabled:{type:Boolean},readonly:{type:Boolean},loading:{type:Boolean}},setup(e,{expose:t}){const r=l(null),n=e,i=a((()=>n.loading)),s=l({}),d=l(""),c=Ee([{type:"AGroup",slot:"",field:"AGroup-1",label:"",grid:{}},{type:"AInput",slot:"title",field:"title",label:"菜单名称",props:{placeholder:"请输入菜单名称"}},{type:"AInput",slot:"resourceName",field:"resourceName",label:"菜单标识",props:{placeholder:"请输入菜单标识"}},{type:"AAutoComplete",slot:"component",field:"component",label:"组件标识",props:{showSearch:!0,placeholder:"请输入组件名称",filterOption:(e,l)=>!e.trim()||l.label.startsWith(e.trim()),options:[{label:"PageView",value:"PageView"},{label:"RouteView",value:"RouteView"},{label:"PageFrame",value:"PageFrame"}]}},{type:"AInput",slot:"redirect",field:"redirect",label:"跳转路径",props:{placeholder:"请输入跳转路径"}},{type:"AInput",slot:"path",field:"path",label:"访问路径",props:{placeholder:"请输入访问路径"}},{type:"ASelect",slot:"icon-select",field:"icon",label:"菜单图标",props:{placeholder:"请输入菜单图标",allowClear:!0,multiple:!1,mode:"tags"},transfer:{output:(e,{helper:l})=>l.isArray(e)?e.slice(-1)[0]:e}},{type:"AInput",slot:"sort",field:"sort",label:"菜单排序",props:{placeholder:"请输入菜单排序"}},{type:"AGroup",slot:"AGroup-2",field:"AGroup-2",border:!0,grid:{}},{type:"ASwitch",slot:"hideChildInMenu",field:"hideChildInMenu",label:"隐藏子菜单",props:{checkedValue:"Y",unCheckedValue:"N",checkedChildren:"开",unCheckedChildren:"关"}},{type:"ASwitch",slot:"hideInMenu",field:"hideInMenu",label:"隐藏菜单",props:{checkedValue:"Y",unCheckedValue:"N",checkedChildren:"开",unCheckedChildren:"关"}},{type:"ASwitch",slot:"allowCache",field:"allowCache",label:"是否缓存",props:{checkedValue:"Y",unCheckedValue:"N",checkedChildren:"开",unCheckedChildren:"关"}},{type:"ASwitch",slot:"activity",field:"activity",label:"是否启用",props:{checkedValue:"Y",unCheckedValue:"N",checkedChildren:"开",unCheckedChildren:"关"}}]),p=Ne({title:[{required:!0,message:"请输入菜单名称"}],resourceName:[{required:!0,message:"请输入菜单标识"}],component:[{required:!0,message:"请输入组件名称"}],sort:[{required:!0,message:"请输入菜单排序"}]}),v=Fe({gutter:8,xs:24});return t({validateFields:(...e)=>{var l;return null==(l=r.value)?void 0:l.validateFields(...e).then((()=>({action:d.value,record:s.value})))},resetFields:(...e)=>{var l;return null==(l=r.value)?void 0:l.resetFields(...e)},doCreate:(e,l)=>{d.value=e,s.value=l},doClose:()=>{d.value="",s.value={}}}),(e,l)=>{const a=O("SIconSelect"),t=O("SForm");return w(),C("section",eo,[o(t,{ref_key:"form",ref:r,modelValue:_(s),"onUpdate:modelValue":l[0]||(l[0]=e=>R(s)?s.value=e:null),disabled:e.disabled,readonly:e.readonly,spinning:_(i),groups:_(c),rules:_(p),grid:_(v)},{"s-component-icon-select":T((({source:e,field:l,attrs:t})=>[o(a,u({value:e[l],"onUpdate:value":a=>e[l]=a},t),null,16,["value","onUpdate:value"])])),_:1},8,["modelValue","disabled","readonly","spinning","groups","rules","grid"])])}}}),[["__scopeId","data-v-27613f4f"]]),ao=Object.freeze(Object.defineProperty({__proto__:null,default:lo},Symbol.toStringTag,{value:"Module"})),to={class:"resource-menu-drawer-container"},oo={class:"readonly-container"},ro={class:"readonly-item"},no={class:"value"},io={class:"readonly-item"},so={class:"value"},uo={class:"drawer-body-footer"},co={class:"drawer-body-footer-fixed"},po=ka(t({name:"ResourceMenuDrawer",inheritAttrs:!1,__name:"MenuDrawer",emits:["submitted","deleted","closed"],setup(e,{expose:a,emit:t}){const r=t,n=l(null),i=l(""),s=l(""),u=l({}),c=l(!1),p=l(!1),v=l(!1),m=l(!1),g=l(!1),h=()=>{var e;g.value&&(i.value="",s.value="",u.value={key:""},p.value=!1,c.value=!1,v.value=!1,m.value=!1,g.value=!1,null==(e=n.value)||e.doClose(),r("closed"))};return a({doEdit:e=>{i.value="修改菜单资源",s.value="update",p.value=!1,c.value=!1,m.value=!1,g.value=!0,u.value=Object.assign({allowCache:"Y",hideInMenu:"N",hideChildInMenu:"N",resourceType:"m",activity:"Y"},e),V((()=>{var e;null==(e=n.value)||e.doCreate("update",u.value)}))},doAdd:e=>{i.value="添加菜单资源",s.value="insert",p.value=!1,c.value=!1,m.value=!0,g.value=!0,u.value=Object.assign({allowCache:"Y",hideInMenu:"N",hideChildInMenu:"N",resourceType:"m",activity:"Y"},e),V((()=>{var e;null==(e=n.value)||e.doCreate("insert",u.value)}))},doDel:async e=>zt(qa("delete",e)).then((e=>{if("0000"!==e.code)return ce.error({message:"系统消息",description:e.message||"删除失败!"}),Promise.reject(e);ce.success({message:"系统消息",description:"删除成功!"}),r("deleted")}))}),(e,l)=>{const a=Y,t=he,s=B;return w(),C("section",to,[o(s,{width:"400",open:_(g),title:_(i),zIndex:1010,forceRender:!1,maskClosable:!0,destroyOnClose:!0,placement:"right",onClose:l[2]||(l[2]=e=>h())},{default:T((()=>[S("div",oo,[S("div",ro,[l[3]||(l[3]=S("span",{class:"name"},"当前菜单ID:",-1)),S("span",no,F(_(u).resourceId||"由系统生成"),1)]),S("div",io,[l[4]||(l[4]=S("span",{class:"name"},"父级菜单ID:",-1)),S("span",so,F(_(u).parentId),1)])]),o(a,{dashed:!0}),o(lo,{ref_key:"form",ref:n,nuForm:"",disabled:_(p),readonly:_(c),loading:_(v)},null,8,["disabled","readonly","loading"]),S("div",uo,[S("div",co,[o(t,{onClick:l[0]||(l[0]=e=>h())},{default:T((()=>l[5]||(l[5]=[d(" 取消 ")]))),_:1}),o(t,{type:"primary",loading:_(v),onClick:l[1]||(l[1]=e=>{var l,a;null==(a=null==(l=n.value)?void 0:l.validateFields())||a.then((({action:e,record:l})=>{if(!v.value){v.value=!0;const a={error:"insert"===e?"新增失败!":"更新失败!",success:"insert"===e?"新增成功!":"更新成功!"},t="insert"===e?Ot(qa(e,l)):At(qa(e,l));return t.finally((()=>{v.value=!1})),t.then((e=>{"0000"!==e.code?ce.error({message:"系统消息",description:e.message||a.error}):ce.success({message:"系统消息",description:a.success});const t="0000"!==e.code?Promise.reject(e):l;return r("submitted"),h(),t}))}}))})},{default:T((()=>l[6]||(l[6]=[d(" 保存 ")]))),_:1},8,["loading"])])])])),_:1},8,["open","title"])])}}}),[["__scopeId","data-v-753848c8"]]),vo=Object.freeze(Object.defineProperty({__proto__:null,default:po},Symbol.toStringTag,{value:"Module"})),mo={class:"resource-menu-table-container"},go={key:0},ho=ka(t({name:"ResourceMenuTable",inheritAttrs:!1,__name:"MenuTable",setup(e,{expose:a}){const t=l(null),r=l(null),n=l({resourceType:"m",parentId:""}),i={flex:"0 0 auto",overflow:"hidden"},s={flex:"1 1 auto",overflow:"auto",position:"relative",boxSizing:"border-box",padding:"20px"},d=l(!1),u=l(!1),c={container:{display:"inline-block",width:"auto"},inputWrapper:{display:"inline-block",minWidth:"180px",paddingRight:"36px"},textWrapper:{display:"inline-block",width:"auto",paddingRight:"36px"}},p=Oe({topHeader:0,leftFooter:!1,rightFooter:!1,bottomFooter:!1,bottomScrollbar:!0}),v=Re({scrollToFirstXOnChange:!0,scrollToFirstYOnChange:!0,overflow:"visible",x:"max-content"}),m=Ae([{title:"序号",dataIndex:"serial",align:"center",maxWidth:60,width:60},{title:"菜单名称",dataIndex:"title",minWidth:100,fixed:"left"},{title:"菜单标识",dataIndex:"resourceName",minWidth:150},{title:"组件标识",dataIndex:"component",minWidth:150},{title:"跳转路径",dataIndex:"redirect",minWidth:150},{title:"访问路径",dataIndex:"path",minWidth:150},{title:"菜单图标",dataIndex:"icon",minWidth:150},{title:"菜单排序",dataIndex:"sort",minWidth:150},{title:"隐藏子菜单",dataIndex:"hideChildInMenu",width:120},{title:"隐藏菜单",dataIndex:"hideInMenu",width:120},{title:"是否缓存",dataIndex:"allowCache",width:120},{title:"是否启用",dataIndex:"activity",width:120}]),g=ze({pageNo:1,pageSize:20,totalPage:0,totalSize:0,showSizeChanger:!0,showTotal:!0,visible:!0,fixed:!0}),h=je((async e=>Rt(qa("",n.value,e.paginate,e.sorter)).then((e=>"0000"!==e.code?(ce.error({message:"系统消息",description:e.message||"按钮资源查询失败!"}),Promise.reject(e)):e)))),f=(e,l,a)=>{var o;e[l]="sort"===l?+a||"":a,null==(o=t.value)||o.update()},y=e=>At(qa("update",e)).then((e=>{if("0000"!==e.code)return ce.error({message:"系统消息",description:"修改失败"}),Promise.reject(e);ce.success({message:"系统消息",description:"修改成功"}),b()})),b=()=>{var e;u.value=!1,d.value=!1,null==(e=t.value)||e.refresh()};return a({queryParams:n,doTableRefresh:b,doTableReady:()=>{d.value=!0},doTableClear:()=>{var e;u.value=!1,d.value=!1,null==(e=t.value)||e.clear()}}),(e,l)=>{const a=O("SEditCellInput"),n=O("SEditCellTextarea"),x=ae,k=O("SEditCellSelectIcon"),S=O("STable"),P=_e;return w(),C("section",mo,[o(P,{title:"子菜单资源",style:{display:"flex","flex-flow":"column nowrap",height:"100%"},headStyle:i,bodyStyle:s,bordered:!1},{default:T((()=>[o(S,{ref_key:"table",ref:t,loading:_(d),"onUpdate:loading":l[3]||(l[3]=e=>R(d)?d.value=e:null),columns:_(m),"onUpdate:columns":l[4]||(l[4]=e=>R(m)?m.value=e:null),paginate:_(g),"onUpdate:paginate":l[5]||(l[5]=e=>R(g)?g.value=e:null),style:{width:"100%",height:"100%",overflow:"auto"},columnPresetResizable:!0,tableLayout:"auto",loadData:_(h),bodyMinRows:!0,immediate:!1,border:!1,scroll:_(v),sticky:_(p),rowKey:"resourceId"},{bodyerCell:T((({column:e,record:t,value:o,groupIndex:r})=>["serial"===e.key?(w(),C("span",go,F(r+1),1)):N("",!0),["title","resourceName","component","sort"].includes(e.key)?(w(),E(a,{key:1,status:_(u),"onUpdate:status":l[0]||(l[0]=e=>R(u)?u.value=e:null),cellStyle:c,text:String(o??""),empty:"无",onChange:l=>f(t,e.key,l.value),onConfirm:e=>y(t)},null,8,["status","text","onChange","onConfirm"])):N("",!0),["redirect","path"].includes(e.key)?(w(),E(n,{key:2,status:_(u),"onUpdate:status":l[1]||(l[1]=e=>R(u)?u.value=e:null),cellStyle:c,text:String(o??""),empty:"无",onChange:l=>f(t,e.key,l.value),onConfirm:e=>y(t)},null,8,["status","text","onChange","onConfirm"])):N("",!0),["hideChildInMenu","hideInMenu","allowCache","activity"].includes(e.key)?(w(),E(x,{key:3,checked:o,checkedValue:"Y",unCheckedValue:"N",checkedChildren:"是",unCheckedChildren:"否",onChange:l=>((e,l,a)=>{f(e,l,a),y(e)})(t,e.key,l)},null,8,["checked","onChange"])):N("",!0),"icon"===e.key?(w(),E(k,{key:4,status:_(u),"onUpdate:status":l[2]||(l[2]=e=>R(u)?u.value=e:null),cellStyle:c,text:String(o??""),allowClear:"",empty:"无",onChange:l=>f(t,e.key,l.value),onConfirm:e=>y(t)},null,8,["status","text","onChange","onConfirm"])):N("",!0)])),_:1},8,["loading","columns","paginate","loadData","scroll","sticky"])])),_:1}),o(po,{ref_key:"menuDrawer",ref:r,onSubmitted:b,onDeleted:b},null,512)])}}}),[["__scopeId","data-v-86b741bd"]]),fo=Object.freeze(Object.defineProperty({__proto__:null,default:ho},Symbol.toStringTag,{value:"Module"})),yo={class:"resource-tree-menu-container"},bo=ka(t({name:"ResourceTreeMenu",inheritAttrs:!1,__name:"TreeMenu",emits:["linkage"],setup(e,{emit:a}){const t={flex:"0 0 auto",overflow:"hidden"},r={flex:"1 1 auto",overflow:"hidden",position:"relative"},n=l({key:"resourceId",title:"title",children:"children"}),i=a,s=l(null),d=l(null),u=l([]),c=l(!1),p=()=>{if(!c.value){c.value=!0;const l=(e={resourceType:"m"},Kl({url:"/resource/getResourceTreeInfo",method:"post",data:e})).then((e=>{if("0000"!==e.code)return ne.error("菜单资源加载失败"),Promise.reject();u.value=e.result,V((()=>m()))}));return l.finally((()=>{c.value=!1})),l}var e},v=()=>{var e;null==(e=s.value)||e.doTreeAllCollapsed()},m=()=>{var e;null==(e=s.value)||e.doTreeAllExpanded()},g=Ie((e=>{i("linkage",e.selectedNode)})),h=e=>{var l;null==(l=d.value)||l.doAdd({parentId:e.resourceId})},f=e=>{var l;null==(l=d.value)||l.doEdit(e)},y=e=>{ge.confirm({title:"是否确认删除该菜单?",content:"删除菜单会导致相关页面丢失，请慎重考虑!",cancelText:"取消",okText:"删除",okType:"danger",onOk:()=>{var l;null==(l=d.value)||l.doDel([e])}})};return p(),(e,l)=>{const a=Ke,i=he,b=ll,x=al,k=tl,S=ol,P=O("STree"),I=_e;return w(),C("section",yo,[o(I,{title:"菜单资源",style:{display:"flex","flex-flow":"column nowrap",height:"100%"},headStyle:t,bodyStyle:r,bordered:!1},{default:T((()=>[o(P,{ref_key:"tree",ref:s,loading:_(c),treeData:_(u),fieldNames:_(n),allowCheckedLevel:2,allowSelectedLevel:2,selectable:!0,checkable:!1,blockNode:!0,showIcon:!1,showLine:!0,tooltip:!0,sticky:!0,bgColor:"#ffffff",onSelect:_(g)},{titleRootButton:T((e=>[o(i,{type:"link",size:"small",onClick:D((l=>h(e)),["stop"])},{icon:T((()=>[o(a)])),_:2},1032,["onClick"]),o(i,{type:"link",size:"small",onClick:D(v,["stop"])},{icon:T((()=>[o(b)])),_:1}),o(i,{type:"link",size:"small",onClick:D(m,["stop"])},{icon:T((()=>[o(x)])),_:1})])),titleParentButton:T((e=>[o(i,{type:"link",size:"small",onClick:D((l=>h(e)),["stop"])},{icon:T((()=>[o(a)])),_:2},1032,["onClick"]),o(i,{type:"link",size:"small",onClick:D((l=>f(e)),["stop"])},{icon:T((()=>[o(k)])),_:2},1032,["onClick"]),o(i,{type:"link",size:"small",style:{color:"#f44848"},onClick:D((l=>y(e)),["stop"])},{icon:T((()=>[o(S)])),_:2},1032,["onClick"])])),titleLeafButton:T((e=>[o(i,{type:"link",size:"small",onClick:D((l=>h(e)),["stop"])},{icon:T((()=>[o(a)])),_:2},1032,["onClick"]),o(i,{type:"link",size:"small",onClick:D((l=>f(e)),["stop"])},{icon:T((()=>[o(k)])),_:2},1032,["onClick"]),o(i,{type:"link",size:"small",style:{color:"#f44848"},onClick:D((l=>y(e)),["stop"])},{icon:T((()=>[o(S)])),_:2},1032,["onClick"])])),_:1},8,["loading","treeData","fieldNames","onSelect"])])),_:1}),o(po,{ref_key:"menuDrawer",ref:d,onSubmitted:p,onDeleted:p},null,512)])}}}),[["__scopeId","data-v-54c605a7"]]),xo=Object.freeze(Object.defineProperty({__proto__:null,default:bo},Symbol.toStringTag,{value:"Module"})),_o={class:"section-container"},ko={class:"section-left-tree"},wo={class:"section-right-container"},Co=ka(t({name:"ResourceManage",inheritAttrs:!1,__name:"ResourceManage",setup(e){A((e=>({"0a2c3255":_(n).layoutViewStyle.minHeight})));const a=l({}),t=l(null),r=l(!1),n=Rl(),i=e=>{a.value=e,V((()=>{var l;e.resourceId||null==(l=t.value)||l.doTableClear(),e.resourceId&&(t.value.queryParams.parentId=e.resourceId,t.value.doTableRefresh())}))};return(e,l)=>{const n=Je,s=el,d=he;return w(),C("section",_o,[S("div",{class:"section-left-container",style:M({width:_(r)?"0":"334px"})},[S("div",ko,[o(bo,{ref:"treeMenu",onLinkage:i},null,512)])],4),S("div",wo,[(w(),E(U(["PageView","RouteView"].includes(_(a).component)?ho:Zt),{ref_key:"refTable",ref:t,parentNode:_(a)},null,8,["parentNode"])),o(d,{type:"link",class:"section-tree-collapse",onClick:l[0]||(l[0]=D((e=>r.value=!_(r)),["stop"]))},{icon:T((()=>[_(r)?(w(),E(n,{key:0})):N("",!0),_(r)?N("",!0):(w(),E(s,{key:1}))])),_:1})])])}}}),[["__scopeId","data-v-bcb114e2"]]),To=Object.freeze(Object.defineProperty({__proto__:null,default:Co},Symbol.toStringTag,{value:"Module"})),So={class:"role-query-container"},Po={class:"flex-row-auto"},Io={class:"flex-row-none"},Mo={class:"flex-row-auto"},Oo={style:{flex:"1 1 auto"}},Ro={style:{flex:"0 0 auto"}},Ao={key:0,class:"form-inline-more"},zo={class:"flex-row-none",style:{width:"210px"}},jo={class:"flex-row-auto"},Eo=ka(t({name:"RoleQuery",inheritAttrs:!1,__name:"RoleQuery",emits:["addRecord","queryTable"],setup(e,{emit:t}){A((e=>({"47cc962e":_(c),"12c79d4d":_(p)})));const r=l(!1),n=t,i=ke(),s=l({roleName:"",activity:""}),u=a((()=>{var e;return(null==(e=i.componentSize)?void 0:e.value)??"middle"})),c=a((()=>"large"===u.value?"412px":"middle"===u.value?"368px":"330px")),p=a((()=>"large"===u.value?"414px":"middle"===u.value?"370px":"332px")),v=()=>{n("addRecord")},m=()=>{n("queryTable",s.value)},g=()=>{r.value=!r.value};return(e,l)=>{const a=Xe,t=he,n=we,i=ve,c=Ze,p=Ke,h=ee,f=le,y=pe,b=z("action");return w(),C("section",So,[o(y,{layout:"inline"},{default:T((()=>[S("div",Po,[S("div",Io,[o(i,{label:"组织/部门",style:M({width:"large"===_(u)?"385px":"middle"===_(u)?"345px":"312px"})},{default:T((()=>[o(n,{value:_(s).roleName,"onUpdate:value":l[0]||(l[0]=e=>_(s).roleName=e),placeholder:"请输入角色名",allowClear:"",onSearch:m},{enterButton:T((()=>[o(t,null,{icon:T((()=>[o(a,{style:{color:"var(--ant-primary-color)"}})])),_:1})])),_:1},8,["value"])])),_:1},8,["style"])]),S("div",Mo,[S("div",Oo,[o(t,{onClick:g},{icon:T((()=>[o(c,{style:{color:"var(--ant-primary-color)"}})])),_:1})]),S("div",Ro,[j((w(),E(t,{type:"primary",onClick:v},{icon:T((()=>[o(p)])),default:T((()=>[l[3]||(l[3]=S("span",null,"新增",-1))])),_:1})),[[b,void 0,"add"]])])])]),_(r)?(w(),C("div",Ao,[S("div",zo,[o(i,{label:"组织状态",style:{"margin-bottom":"0"}},{default:T((()=>[o(f,{value:_(s).activity,"onUpdate:value":l[1]||(l[1]=e=>_(s).activity=e),placeholder:"请选择角色状态",onChange:m},{default:T((()=>[o(h,{value:""},{default:T((()=>l[4]||(l[4]=[d(" 全部 ")]))),_:1}),o(h,{value:"Y"},{default:T((()=>l[5]||(l[5]=[d(" 启用 ")]))),_:1}),o(h,{value:"N"},{default:T((()=>l[6]||(l[6]=[d(" 禁用 ")]))),_:1})])),_:1},8,["value"])])),_:1})]),S("div",jo,[o(t,{type:"primary",style:{margin:"0 8px"},onClick:m},{default:T((()=>l[7]||(l[7]=[d(" 查询 ")]))),_:1}),o(t,{style:{margin:"0 8px"},onClick:l[2]||(l[2]=e=>(s.value.roleName="",s.value.activity="",void m()))},{default:T((()=>l[8]||(l[8]=[d(" 重置 ")]))),_:1})])])):N("",!0)])),_:1})])}}}),[["__scopeId","data-v-50bd989c"]]),No=Object.freeze(Object.defineProperty({__proto__:null,default:Eo},Symbol.toStringTag,{value:"Module"})),Fo={class:"role-resource-drawer-container"},Vo={class:"flex-row-auto",style:{width:"100%",height:"calc(100% - 55px)"}},Do={class:"flex-row-none",style:{width:"310px",height:"100%","margin-right":"24px"}},Uo={class:"s-tree-title-button always-show"},Lo={class:"flex-row-auto",style:{width:"100%",height:"100%"}},qo={class:"resource-button-container"},Ho={class:"group-header"},$o={class:"group-content"},Wo={class:"drawer-body-footer"},Bo={class:"drawer-body-footer-fixed"},Yo=ka(t({name:"RoleResource",inheritAttrs:!1,__name:"RoleResource",emits:["submitted","closed"],setup(e,{expose:a,emit:t}){const r=t,n=l(!1),i=l(""),u=l(""),c=l({}),p=l({tree:!1,button:!1,submitting:!1}),v=l(null),m=l([]),g=l([]),h={key:"value",title:"label"},f=l([]),y=l([]),b=l([]),x=async()=>{return p.value.tree||(p.value.tree=!0),p.value.button||(p.value.button=!0),(e={roleId:c.value.roleId},Kl({url:"/resource/getResourceMenuByRole",method:"post",data:e})).then((e=>{if("0000"!==e.code)return e.message&&ne.error(e.message),Promise.reject();m.value=e.result.treeNodes,g.value=e.result.treeSelect,V((()=>{var e;null==(e=v.value)||e.doTreeAllExpanded()})),k([...g.value])}));var e},k=async e=>{p.value.button||(p.value.button=!0);const l=qa("",e.map((e=>({roleId:c.value.roleId,menuId:e})))),a=(t=l,Kl({url:"/resource/getResourceButtonByRole",method:"post",data:t})).then((e=>{if("0000"!==e.code)return e.message&&ne.error(e.message),Promise.reject();f.value=e.result.map((e=>({...e,selected:e.selected.filter((l=>e.actionsOptions.some((e=>e.value===l))))}))),N()}));var t;return a.finally((()=>{p.value.tree=!1,p.value.button=!1})),a},P=Ve((e=>{if(!v.value)return;const l=[...e.checkedKeys];g.value=l,k(l)})),I=e=>{const l=e.button,a=e.option;a||(l.options.every((e=>l.selected.includes(e.value)))?l.selected=[]:l.selected=l.options.map((e=>e.value))),a&&(l.selected.includes(a.value)?l.selected=l.selected.filter((e=>e!==a.value)):l.selected.push(a.value)),b.value=y.value.flatMap((e=>e.selected))},M=e=>e.options.every((l=>e.selected.includes(l.value))),A=e=>!e.options.every((l=>e.selected.includes(l.value)))&&e.options.some((l=>e.selected.includes(l.value))),z=()=>{var e;null==(e=v.value)||e.doTreeAllCollapsed()},j=()=>{var e;null==(e=v.value)||e.doTreeAllExpanded()},N=()=>{f.value=f.value.filter((e=>e.actionsOptions&&e.actionsOptions.length>0&&g.value.some((l=>l===e.id)))),f.value.sort(((e,l)=>g.value.findIndex((l=>l===e.id))-g.value.findIndex((e=>e===l.id)))),y.value=f.value.map((e=>{const l=v.value.pickMatchTreeNode(e.id),a=v.value.pickUpperTreeNodes(e.id);return e.actionsOptions||(e.actionsOptions=[]),e.selected||(e.selected=[]),{menu:l,titles:[...a.map((e=>e.label)),l.label],options:e.actionsOptions,selected:e.selected,id:e.id}})),b.value=y.value.flatMap((e=>e.selected))},U=()=>{n.value&&(n.value=!1,i.value="",u.value="",c.value={},p.value={tree:!1,button:!1,submitting:!1},m.value=[],g.value=[],f.value=[],y.value=[],b.value=[],r("closed"))},q=()=>{const e=c.value.roleId,l=[...g.value,...b.value].join(",");p.value.submitting||(p.value.submitting=!0);const a=(t={roleId:e,resourceIds:l},Kl({url:"/resource/modifyResoureInfoByRole",method:"post",data:t})).then((e=>{if("0000"!==e.code)return ce.error({message:"系统消息",description:"修改失败"}),Promise.reject(e);ce.success({message:"系统消息",description:"修改成功"}),r("submitted"),U()}));var t;return a.finally((()=>{p.value.submitting=!1})),a};return a({doClose:U,doOpen:e=>{n.value=!0,i.value="资源配置",u.value="update",c.value=e,p.value={tree:!1,button:!1,submitting:!1}}}),(e,l)=>{const a=ll,t=he,r=al,u=O("STree"),c=_e,f=xe,b=oe,k=te,N=fe,V=B;return w(),C("section",Fo,[o(V,{open:_(n),title:_(i),width:"100%",zIndex:1010,maskClosable:!0,bodyStyle:{height:"calc(100% - 55px)",padding:"15px"},contentWrapperStyle:{"max-width":"1180px"},onAfterOpenChange:l[3]||(l[3]=()=>_(n)&&x()),onClose:l[4]||(l[4]=e=>U())},{default:T((()=>[S("div",Vo,[S("div",Do,[o(c,{title:"菜单资源",style:{display:"flex","flex-flow":"column nowrap",width:"100%",height:"100%"},bodyStyle:{width:"100%",height:"100%",flex:"1 1 auto",padding:"15px 24px",overflow:"auto",position:"relative"},headStyle:{flex:"0 0 auto",overflow:"hidden"}},{default:T((()=>[o(u,{ref_key:"tree",ref:v,checkedKeys:_(g),"onUpdate:checkedKeys":l[0]||(l[0]=e=>R(g)?g.value=e:null),loading:_(p).tree,treeData:_(m),fieldNames:h,allowCheckedLevel:2,allowSelectedLevel:2,allowSelectToCheck:!0,allowUnSelected:!0,allowUnChecked:!0,selectable:!1,checkedMode:"link",checkable:!0,showIcon:!1,showLine:!0,tooltip:!0,onCheck:_(P)},{titleRootButton:T((()=>[S("span",Uo,[o(t,{ghost:"",size:"small",type:"primary",style:{margin:"0 3px"},onClick:D(z,["stop"])},{icon:T((()=>[o(a)])),_:1}),o(t,{ghost:"",size:"small",type:"primary",style:{margin:"0 3px"},onClick:D(j,["stop"])},{icon:T((()=>[o(r)])),_:1})])])),_:1},8,["checkedKeys","loading","treeData","onCheck"])])),_:1})]),S("div",Lo,[o(c,{title:"按钮资源",style:{display:"flex","flex-flow":"column nowrap",width:"100%",height:"100%"},bodyStyle:{width:"100%",height:"100%",flex:"1 1 auto",padding:"15px 24px",overflow:"auto",position:"relative"},headStyle:{flex:"0 0 auto",overflow:"hidden"}},{default:T((()=>[o(N,{spinning:_(p).button},{default:T((()=>[S("div",qo,[(w(!0),C(s,null,L(_(y),(e=>(w(),C("div",{key:e.id,class:"resource-button-group"},[S("div",Ho,[o(f,{style:{margin:"0 6px 0 4px"},checked:M(e),indeterminate:A(e),onChange:l=>I({button:e,option:null})},null,8,["checked","indeterminate","onChange"]),o(k,null,{default:T((()=>[(w(!0),C(s,null,L(e.titles,(e=>(w(),E(b,{key:e},{default:T((()=>[d(F(e),1)])),_:2},1024)))),128))])),_:2},1024)]),S("div",$o,[(w(!0),C(s,null,L(e.options,(l=>(w(),C("div",{key:l.value,class:"group-checkbox"},[o(f,{title:l.label,checked:e.selected.includes(l.value),onChange:a=>I({button:e,option:l})},{default:T((()=>[d(F(l.label),1)])),_:2},1032,["title","checked","onChange"])])))),128))])])))),128))])])),_:1},8,["spinning"])])),_:1})])]),S("div",Wo,[S("div",Bo,[o(t,{onClick:l[1]||(l[1]=e=>U())},{default:T((()=>l[5]||(l[5]=[d(" 取消 ")]))),_:1}),o(t,{type:"primary",loading:_(p).submitting,onClick:l[2]||(l[2]=e=>q())},{default:T((()=>l[6]||(l[6]=[d(" 保存 ")]))),_:1},8,["loading"])])])])),_:1},8,["open","title"])])}}}),[["__scopeId","data-v-99a39dd9"]]),Go=Object.freeze(Object.defineProperty({__proto__:null,default:Yo},Symbol.toStringTag,{value:"Module"}));function Ko(e){return Kl({url:"/role/modifyRoleInfo",method:"post",data:e})}const Qo={class:"role-table-container"},Xo={key:0},Zo=["onClick"],Jo=ka(t({name:"RoleTable",inheritAttrs:!1,__name:"RoleTable",setup(e,{expose:a}){const t=l({roleName:"",activity:""}),r=l({dataFlag:[{label:"用户级",value:"0"},{label:"部门级",value:"1"},{label:"公司级",value:"2"}]}),n=l(null),i=l(null),s=l(!1),d={container:{display:"inline-block",width:"auto"},inputWrapper:{display:"inline-block",maxWidth:"200px",paddingRight:"36px"},textWrapper:{display:"inline-block",width:"auto",paddingRight:"36px"}},u=Oe({topHeader:0,leftFooter:!1,rightFooter:!1,bottomFooter:!1,bottomScrollbar:!0}),c=Re({scrollToFirstXOnChange:!0,scrollToFirstYOnChange:!0,overflow:"visible",x:"max-content"}),p=Ae([{title:"序号",dataIndex:"serial",align:"center",maxWidth:60,width:60},{title:"角色名称",dataIndex:"roleName"},{title:"数据范围",dataIndex:"dataFlag"},{title:"角色状态",dataIndex:"activity"},{title:"操作",dataIndex:"action",align:"center",width:120}]),v=ze({pageNo:1,pageSize:20,totalPage:0,totalSize:0,showSizeChanger:!0,showTotal:!0,visible:!0,fixed:!0}),m=je((e=>{const l=qa("",t.value,e.paginate,e.sorter);return(a=l,Kl({url:"/role/getRoleInfoByPages",method:"post",data:a})).then((e=>"0000"!==e.code?(ce.error({message:"系统消息",description:e.message||"用户角色查询失败!"}),Promise.reject(e)):e));var a})),g=(e,l,a)=>{var t;e[l]=a,null==(t=n.value)||t.update()},h=e=>Ko(qa("update",e)).then((e=>{if("0000"!==e.code)return ce.error({message:"系统消息",description:"修改失败"}),Promise.reject(e);ce.success({message:"系统消息",description:"修改成功"}),f()})),f=()=>{var e;s.value=!1,null==(e=n.value)||e.refresh()};return a({doTableRefresh:f,queryParams:t}),(e,l)=>{const a=O("SEditCellInput"),t=O("SEditCellSelect"),f=ae,y=O("STable");return w(),C("section",Qo,[o(y,{ref_key:"table",ref:n,columns:_(p),"onUpdate:columns":l[2]||(l[2]=e=>R(p)?p.value=e:null),paginate:_(v),"onUpdate:paginate":l[3]||(l[3]=e=>R(v)?v.value=e:null),columnPresetResizable:!0,loadData:_(m),bodyMinRows:!0,immediate:!0,border:!1,scroll:_(c),sticky:_(u),rowKey:"roleId"},{bodyerCell:T((({column:e,record:o,value:n,groupIndex:u})=>["serial"===e.key?(w(),C("span",Xo,F(u+1),1)):N("",!0),"roleName"===e.key?(w(),E(a,{key:1,status:_(s),"onUpdate:status":l[0]||(l[0]=e=>R(s)?s.value=e:null),cellStyle:d,text:n,onChange:l=>g(o,e.key,l.value),onConfirm:e=>h(o)},null,8,["status","text","onChange","onConfirm"])):N("",!0),"dataFlag"===e.key?(w(),E(t,{key:2,status:_(s),"onUpdate:status":l[1]||(l[1]=e=>R(s)?s.value=e:null),cellStyle:d,text:n,options:_(r).dataFlag,onChange:l=>g(o,e.key,l.value),onConfirm:e=>h(o)},null,8,["status","text","options","onChange","onConfirm"])):N("",!0),"activity"===e.key?(w(),E(f,{key:3,checked:n,checkedValue:"Y",unCheckedValue:"N",checkedChildren:"开",unCheckedChildren:"关",onChange:e=>((e,l,a)=>{g(e,l,a),h(e)})(o,"activity",e)},null,8,["checked","onChange"])):N("",!0),"action"===e.key?(w(),C("a",{key:4,href:"javascript: void(0)",style:{display:"inline-block",margin:"0 7px","font-weight":"500",color:"var(--ant-primary-color)"},onClick:D((e=>(e=>{var l;null==(l=i.value)||l.doOpen(e)})(o)),["stop"])}," 资源配置 ",8,Zo)):N("",!0)])),_:1},8,["columns","paginate","loadData","scroll","sticky"]),o(Yo,{ref_key:"roleResource",ref:i,onSubmitted:()=>{}},null,512)])}}}),[["__scopeId","data-v-138d15bc"]]),er=Object.freeze(Object.defineProperty({__proto__:null,default:Jo},Symbol.toStringTag,{value:"Module"})),lr={class:"role-form-container"},ar=ka(t({name:"RoleForm",inheritAttrs:!1,__name:"RoleForm",props:{disabled:{type:Boolean},readonly:{type:Boolean},loading:{type:Boolean}},setup(e,{expose:t}){const r=l(null),n=e,i=a((()=>n.loading)),s=l({}),d=l(""),u=Ee([{type:"AGroup",slot:"",field:"AGroup-1",label:""},{type:"AInputTextarea",slot:"roleName",field:"roleName",label:"角色名称",props:{rows:1,autoSize:!0,placeholder:"请输入角色名称"}},{type:"ASelect",slot:"dataFlag",field:"dataFlag",label:"数据范围",props:{placeholder:"请选择数据范围",options:[{label:"用户级",value:"0"},{label:"部门级",value:"1"},{label:"公司级",value:"2"}]}},{type:"AGroup",slot:"AGroup-2",field:"AGroup-2",label:"状态信息",border:!0},{type:"ASwitch",slot:"activity",field:"activity",label:"角色状态",props:{checkedValue:"Y",unCheckedValue:"N",checkedChildren:"开",unCheckedChildren:"关"}}]),c=Ne({roleName:[{required:!0,message:"请输入角色名称"}],dataFlag:[{required:!0,message:"请选择数据范围"}]}),p=Fe({gutter:8,xs:24});return t({validateFields:(...e)=>{var l;return null==(l=r.value)?void 0:l.validateFields(...e).then((()=>({action:d.value,record:s.value})))},resetFields:(...e)=>{var l;return null==(l=r.value)?void 0:l.resetFields(...e)},doCreate:(e,l)=>{d.value=e,s.value=l},doClose:()=>{d.value="",s.value={}}}),(e,l)=>{const a=O("SForm");return w(),C("section",lr,[o(a,{ref_key:"form",ref:r,modelValue:_(s),"onUpdate:modelValue":l[0]||(l[0]=e=>R(s)?s.value=e:null),disabled:e.disabled,readonly:e.readonly,spinning:_(i),groups:_(u),rules:_(c),grid:_(p)},null,8,["modelValue","disabled","readonly","spinning","groups","rules","grid"])])}}}),[["__scopeId","data-v-e9687f3a"]]),tr=Object.freeze(Object.defineProperty({__proto__:null,default:ar},Symbol.toStringTag,{value:"Module"})),or={class:"role-drawer-container"},rr={class:"drawer-body-footer"},nr={class:"drawer-body-footer-fixed"},ir=t({name:"RoleDrawer",inheritAttrs:!1,__name:"RoleDrawer",emits:["submitted","closed"],setup(e,{expose:a,emit:t}){const r=t,n=l(null),i=l(""),s=l(""),u=l({}),c=l(!1),p=l(!1),v=l(!1),m=l(!1),g=l(!1),h=()=>{var e,l;null==(l=null==(e=n.value)?void 0:e.validateFields())||l.then((({action:e,record:l})=>{if(!v.value){v.value=!0;const t={error:"insert"===e?"新增失败!":"更新失败!",success:"insert"===e?"新增成功!":"更新成功!"},o="insert"===e?(a=qa(e,l),Kl({url:"/role/addRoleInfo",method:"post",data:a})):Ko(qa(e,l));return o.finally((()=>{v.value=!1})),o.then((e=>{"0000"!==e.code?ce.error({message:"系统消息",description:e.message||t.error}):ce.success({message:"系统消息",description:t.success});const a="0000"!==e.code?Promise.reject(e):l;return r("submitted"),f(),a}))}var a}))},f=()=>{var e;g.value&&(i.value="",s.value="",u.value={},p.value=!1,c.value=!1,v.value=!1,m.value=!1,g.value=!1,null==(e=n.value)||e.doClose(),r("closed"))};return a({doEdit:e=>{i.value="修改角色",s.value="update",p.value=!1,c.value=!1,m.value=!1,g.value=!0,u.value=Object.assign({activity:"Y"},e),V((()=>{var e;null==(e=n.value)||e.doCreate("update",u.value)}))},doAdd:e=>{i.value="添加角色",s.value="insert",p.value=!1,c.value=!1,m.value=!0,g.value=!0,u.value=Object.assign({activity:"Y"},e),V((()=>{var e;null==(e=n.value)||e.doCreate("insert",u.value)}))}}),(e,l)=>{const a=he,t=B;return w(),C("section",or,[o(t,{width:"400",open:_(g),title:_(i),zIndex:1010,forceRender:!1,maskClosable:!0,destroyOnClose:!0,placement:"right",onClose:l[2]||(l[2]=e=>f())},{default:T((()=>[o(ar,{ref_key:"form",ref:n,disabled:_(p),readonly:_(c),loading:_(v)},null,8,["disabled","readonly","loading"]),S("div",rr,[S("div",nr,[o(a,{onClick:l[0]||(l[0]=e=>f())},{default:T((()=>l[3]||(l[3]=[d(" 取消 ")]))),_:1}),o(a,{type:"primary",loading:_(v),onClick:l[1]||(l[1]=e=>h())},{default:T((()=>l[4]||(l[4]=[d(" 保存 ")]))),_:1},8,["loading"])])])])),_:1},8,["open","title"])])}}}),sr=Object.freeze(Object.defineProperty({__proto__:null,default:ir},Symbol.toStringTag,{value:"Module"})),dr={class:"section-container"},ur={class:"section-query-container"},cr={class:"section-table-container"},pr=ka(t({name:"RoleManage",inheritAttrs:!1,__name:"RoleManage",setup(e){A((e=>({"11bf0cb4":_(d).layoutViewStyle.minHeight})));const a={display:"flex",flexFlow:"column nowrap",flex:"1 1 auto",width:"100%",height:"100%",overflow:"hidden"},t={flex:"0 0 auto",overflow:"hidden"},r={display:"flex",flexFlow:"column nowrap",flex:"1 1 auto",padding:"20px 24px 6px",overflow:"hidden",position:"relative"},n=l(null),i=l(null),s=l(null),d=Rl(),u=(e={})=>{n.value&&(n.value.queryParams={...n.value.queryParams,...e},n.value.doTableRefresh())},c=e=>{var l;null==(l=s.value)||l.doEdit(e)},p=()=>{var e;null==(e=s.value)||e.doAdd({})};return(e,l)=>{const d=_e;return w(),C("section",dr,[o(d,{style:a,headStyle:t,bodyStyle:r,bordered:!1},{default:T((()=>[S("div",ur,[o(Eo,{ref_key:"query",ref:i,onQueryTable:u,onAddRecord:p},null,512)]),S("div",cr,[o(Jo,{ref_key:"table",ref:n,onEditRecord:c},null,512)])])),_:1}),o(ir,{ref_key:"drawer",ref:s,onSubmitted:u},null,512)])}}}),[["__scopeId","data-v-e464c4f9"]]),vr=Object.freeze(Object.defineProperty({__proto__:null,default:pr},Symbol.toStringTag,{value:"Module"})),mr={class:"user-query-container"},gr={class:"flex-row-auto"},hr={class:"flex-row-none"},fr={class:"flex-row-auto"},yr={style:{flex:"1 1 auto"}},br={style:{flex:"0 0 auto"}},xr={key:0,class:"form-inline-more"},_r={class:"flex-row-none",style:{width:"210px"}},kr={class:"flex-row-auto"},wr=ka(t({name:"UserQuery",inheritAttrs:!1,__name:"UserQuery",emits:["addRecord","queryTable"],setup(e,{emit:t}){A((e=>({"2e4a8b7e":_(c),"43a9aa4c":_(p)})));const r=l(!1),n=t,i=ke(),s=l({userNo:"",activity:""}),u=a((()=>{var e;return(null==(e=i.componentSize)?void 0:e.value)??"middle"})),c=a((()=>"large"===u.value?"412px":"middle"===u.value?"368px":"330px")),p=a((()=>"large"===u.value?"414px":"middle"===u.value?"370px":"332px")),v=()=>{n("addRecord")},m=()=>{n("queryTable",s.value)},g=()=>{r.value=!r.value};return(e,l)=>{const a=Xe,t=he,n=we,i=ve,c=Ze,p=Ke,h=ee,f=le,y=pe,b=z("action");return w(),C("section",mr,[o(y,{layout:"inline"},{default:T((()=>[S("div",gr,[S("div",hr,[o(i,{label:"组织/部门",style:M({width:"large"===_(u)?"385px":"middle"===_(u)?"345px":"312px"})},{default:T((()=>[o(n,{value:_(s).userNo,"onUpdate:value":l[0]||(l[0]=e=>_(s).userNo=e),placeholder:"请输入用户名",allowClear:"",onSearch:m},{enterButton:T((()=>[o(t,null,{icon:T((()=>[o(a,{style:{color:"var(--ant-primary-color)"}})])),_:1})])),_:1},8,["value"])])),_:1},8,["style"])]),S("div",fr,[S("div",yr,[o(t,{onClick:g},{icon:T((()=>[o(c,{style:{color:"var(--ant-primary-color)"}})])),_:1})]),S("div",br,[j((w(),E(t,{type:"primary",onClick:v},{icon:T((()=>[o(p)])),default:T((()=>[l[3]||(l[3]=S("span",null,"新增",-1))])),_:1})),[[b,void 0,"add"]])])])]),_(r)?(w(),C("div",xr,[S("div",_r,[o(i,{label:"组织状态",style:{"margin-bottom":"0"}},{default:T((()=>[o(f,{value:_(s).activity,"onUpdate:value":l[1]||(l[1]=e=>_(s).activity=e),placeholder:"请选择角色状态",onChange:m},{default:T((()=>[o(h,{value:""},{default:T((()=>l[4]||(l[4]=[d(" 全部 ")]))),_:1}),o(h,{value:"Y"},{default:T((()=>l[5]||(l[5]=[d(" 启用 ")]))),_:1}),o(h,{value:"N"},{default:T((()=>l[6]||(l[6]=[d(" 禁用 ")]))),_:1})])),_:1},8,["value"])])),_:1})]),S("div",kr,[o(t,{type:"primary",style:{margin:"0 8px"},onClick:m},{default:T((()=>l[7]||(l[7]=[d(" 查询 ")]))),_:1}),o(t,{style:{margin:"0 8px"},onClick:l[2]||(l[2]=e=>(s.value.userNo="",s.value.activity="",void m()))},{default:T((()=>l[8]||(l[8]=[d(" 重置 ")]))),_:1})])])):N("",!0)])),_:1})])}}}),[["__scopeId","data-v-55f46bfe"]]),Cr=Object.freeze(Object.defineProperty({__proto__:null,default:wr},Symbol.toStringTag,{value:"Module"}));function Tr(e){return Kl({url:"/user/modifyUserInfo",method:"post",data:e})}const Sr={class:"user-table-container"},Pr={key:0},Ir=["onClick"],Mr=ka(t({name:"UserTable",inheritAttrs:!1,__name:"UserTable",props:{presetOptions:{}},emits:["editRecord"],setup(e,{expose:a,emit:t}){const r=l({userNo:"",activity:""}),n=e,i=t,u=l(null),c=Oe({topHeader:0,leftFooter:!1,rightFooter:!1,bottomFooter:!1,bottomScrollbar:!0}),p=Re({scrollToFirstXOnChange:!0,scrollToFirstYOnChange:!0,overflow:"visible",x:"max-content"}),v=Ae([{title:"序号",dataIndex:"serial",align:"center",maxWidth:60,width:60},{title:"用户名",dataIndex:"userNo",ellipsis:!0,width:130},{title:"用户姓名",dataIndex:"userName",ellipsis:!0,width:130},{title:"手机号",dataIndex:"mobilePhone",ellipsis:!0,width:120},{title:"职位",dataIndex:"postName"},{title:"所属组织",dataIndex:"orgId"},{title:"所属部门",dataIndex:"deptId"},{title:"可用状态",dataIndex:"activity",align:"center",minWidth:80},{title:"操作",dataIndex:"action",align:"center",width:80}]),m=ze({pageNo:1,pageSize:20,totalPage:0,totalSize:0,showSizeChanger:!0,showTotal:!0,visible:!0,fixed:!0}),g=je((e=>{const l=qa("",r.value,e.paginate,e.sorter);return(a=l,Kl({url:"/user/getUserInfoList",method:"post",data:a})).then((e=>"0000"!==e.code?(ce.error({message:"系统消息",description:e.message||"用户查询查询失败!"}),Promise.reject(e)):e));var a})),h=(e,l,a)=>{var t;e[l]=a,null==(t=u.value)||t.update()},f=e=>Tr(qa("update",e)).then((e=>{if("0000"!==e.code)return ce.error({message:"系统消息",description:"修改失败"}),Promise.reject(e);ce.success({message:"系统消息",description:"修改成功"}),y()})),y=()=>{var e;null==(e=u.value)||e.refresh()};return a({doTableRefresh:y,queryParams:r}),(e,l)=>{const a=ae,t=O("STable");return w(),C("section",Sr,[o(t,{ref_key:"table",ref:u,columns:_(v),"onUpdate:columns":l[0]||(l[0]=e=>R(v)?v.value=e:null),paginate:_(m),"onUpdate:paginate":l[1]||(l[1]=e=>R(m)?m.value=e:null),columnPresetResizable:!0,loadData:_(g),bodyMinRows:!0,immediate:!0,border:!1,scroll:_(p),sticky:_(c),rowKey:"id"},{bodyerCell:T((({column:e,record:l,value:t,groupIndex:o})=>["serial"===e.key?(w(),C("span",Pr,F(o+1),1)):N("",!0),"orgId"===e.key?(w(),C(s,{key:1},[d(F(_(La)(n.presetOptions.orgTree,t,["shortName","label"])),1)],64)):N("",!0),"deptId"===e.key?(w(),C(s,{key:2},[d(F(_(La)(n.presetOptions.deptId,t)),1)],64)):N("",!0),"activity"===e.key?(w(),E(a,{key:3,checked:t,checkedValue:"Y",unCheckedValue:"N",checkedChildren:"开",unCheckedChildren:"关",onChange:e=>((e,l,a)=>{h(e,l,a),f(e)})(l,"activity",e)},null,8,["checked","onChange"])):N("",!0),"action"===e.key?(w(),C("a",{key:4,href:"javascript: void(0)",style:{"font-weight":"500",display:"inline-block",margin:"0 7px"},onClick:e=>(e=>{i("editRecord",e)})(l)}," 修改 ",8,Ir)):N("",!0)])),_:1},8,["columns","paginate","loadData","scroll","sticky"])])}}}),[["__scopeId","data-v-f9238223"]]),Or=Object.freeze(Object.defineProperty({__proto__:null,default:Mr},Symbol.toStringTag,{value:"Module"})),Rr={class:"user-drawer-form-container"},Ar=ka(t({name:"UserForm",inheritAttrs:!1,__name:"UserForm",props:{presetOptions:{},disabled:{type:Boolean},readonly:{type:Boolean},loading:{type:Boolean}},setup(e,{expose:t}){const r=l(null),n=e,i=a((()=>n.loading)),s=l({}),d=l(""),u=Ee([{type:"AGroup",slot:"",field:"AGroup-1",label:""},{type:"AInputTextarea",slot:"userNo",field:"userNo",label:"用户名",props:{rows:1,autoSize:!0,placeholder:"请输入用户名"}},{type:"AInputPassword",slot:"password",field:"password",label:"用户密码",props:{placeholder:"请输入用户密码"}},{type:"AInput",slot:"userName",field:"userName",label:"用户姓名",props:{placeholder:"请输入用户姓名"}},{type:"AInput",slot:"mobilePhone",field:"mobilePhone",label:"手机号码",props:{placeholder:"请输入手机号码"}},{type:"AInput",slot:"idCard",field:"idCard",label:"身份证号",props:{placeholder:"请输入身份证号"}},{type:"ATreeSelect",slot:"orgId",field:"orgId",label:"所属组织",props:{popupClassName:"text-ellipsis",dropdownStyle:{maxHeight:"300px"},allowClear:!0,showSearch:!0,treeDefaultExpandAll:!0,dropdownMatchSelectWidth:!0,treeNodeFilterProp:"label",placeholder:"请选择所属组织",treeData:n.presetOptions.orgTree}},{type:"ASelect",slot:"deptId",field:"deptId",label:"所属部门",props:{allowClear:!0,placeholder:"请选择所属部门",options:n.presetOptions.deptId}},{type:"ASelect",slot:"roleId",field:"roleId",label:"所属角色",props:{mode:"multiple",placeholder:"请选择所属角色",allowClear:!0,fieldNames:{label:"roleName",value:"roleId"},options:n.presetOptions.roleId}},{type:"AGroup",slot:"AGroup-2",field:"AGroup-2",label:"状态信息",border:!0},{type:"ASwitch",slot:"activity",field:"activity",label:"用户状态",props:{checkedValue:"Y",unCheckedValue:"N",checkedChildren:"开",unCheckedChildren:"关"}}]),c=Ne({userNo:[{required:!0,message:"请输入用户名"}],password:De.password({message:"请输入用户密码",validator:"用户密码过短",pattern:/.{6,}/,required:!0}),userName:[{required:!0,message:"请输入用户姓名"}],mobilePhone:[{required:!0,message:"请输入手机号码"}],idCard:[{required:!0,message:"请输入身份证号"}],orgId:[{required:!0,message:"请选择所属组织"}],roleId:[{required:!0,message:"请选择所属角色"}]}),p=Fe({gutter:8,xs:24});return t({validateFields:(...e)=>{var l;return null==(l=r.value)?void 0:l.validateFields(...e).then((()=>({action:d.value,record:s.value})))},resetFields:(...e)=>{var l;return null==(l=r.value)?void 0:l.resetFields(...e)},doCreate:(e,l)=>{d.value=e,s.value=l},doClose:()=>{d.value="",s.value={}}}),(e,l)=>{const a=O("SForm");return w(),C("section",Rr,[o(a,{ref_key:"form",ref:r,modelValue:_(s),"onUpdate:modelValue":l[0]||(l[0]=e=>R(s)?s.value=e:null),disabled:e.disabled,readonly:e.readonly,spinning:_(i),groups:_(u),rules:_(c),grid:_(p)},null,8,["modelValue","disabled","readonly","spinning","groups","rules","grid"])])}}}),[["__scopeId","data-v-40ca657f"]]),zr=Object.freeze(Object.defineProperty({__proto__:null,default:Ar},Symbol.toStringTag,{value:"Module"})),jr={class:"user-drawer-container"},Er={class:"drawer-body-footer"},Nr={class:"drawer-body-footer-fixed"},Fr=t({name:"UserDrawer",inheritAttrs:!1,__name:"UserDrawer",props:{presetOptions:{}},emits:["submitted","closed"],setup(e,{expose:a,emit:t}){const r=e,n=t,i=l(null),s=l(""),u=l(""),c=l({}),p=l(!1),v=l(!1),m=l(!1),g=l(!1),h=l(!1),f=()=>{var e,l;null==(l=null==(e=i.value)?void 0:e.validateFields())||l.then((({action:e,record:l})=>{if(!m.value){m.value=!0;const t={error:"insert"===e?"新增失败!":"更新失败!",success:"insert"===e?"新增成功!":"更新成功!"},o="insert"===e?(a=qa(e,l),Kl({url:"/user/addUserInfo",method:"post",data:a})):Tr(qa(e,l));return o.finally((()=>{m.value=!1})),o.then((e=>{"0000"!==e.code?ce.error({message:"系统消息",description:e.message||t.error}):ce.success({message:"系统消息",description:t.success});const a="0000"!==e.code?Promise.reject(e):l;return n("submitted"),y(),a}))}var a}))},y=()=>{var e;h.value&&(s.value="",u.value="",c.value={},v.value=!1,p.value=!1,m.value=!1,g.value=!1,h.value=!1,null==(e=i.value)||e.doClose(),n("closed"))};return a({doEdit:e=>{s.value="修改用户",u.value="update",v.value=!1,p.value=!1,g.value=!1,h.value=!0,c.value=Object.assign({activity:"Y"},e),V((()=>{var e;null==(e=i.value)||e.doCreate("update",c.value)}))},doAdd:e=>{s.value="新增用户",u.value="insert",v.value=!1,p.value=!1,g.value=!0,h.value=!0,c.value=Object.assign({activity:"Y"},e),V((()=>{var e;null==(e=i.value)||e.doCreate("insert",c.value)}))}}),(e,l)=>{const a=he,t=B;return w(),C("section",jr,[o(t,{width:"400",open:_(h),title:_(s),zIndex:1010,forceRender:!1,maskClosable:!0,destroyOnClose:!0,placement:"right",onClose:l[2]||(l[2]=e=>y())},{default:T((()=>[o(Ar,{ref_key:"form",ref:i,presetOptions:r.presetOptions,disabled:_(v),readonly:_(p),loading:_(m)},null,8,["presetOptions","disabled","readonly","loading"]),S("div",Er,[S("div",Nr,[o(a,{onClick:l[0]||(l[0]=e=>y())},{default:T((()=>l[3]||(l[3]=[d(" 取消 ")]))),_:1}),o(a,{type:"primary",loading:_(m),onClick:l[1]||(l[1]=e=>f())},{default:T((()=>l[4]||(l[4]=[d(" 保存 ")]))),_:1},8,["loading"])])])])),_:1},8,["open","title"])])}}}),Vr=Object.freeze(Object.defineProperty({__proto__:null,default:Fr},Symbol.toStringTag,{value:"Module"})),Dr={class:"section-container"},Ur={class:"section-query-container"},Lr={class:"section-table-container"},qr=ka(t({name:"UserManage",inheritAttrs:!1,__name:"UserManage",setup(e){A((e=>({"7c202006":_(u).layoutViewStyle.minHeight})));const a=l({orgTree:[],deptId:[],roleId:[]}),t={display:"flex",flexFlow:"column nowrap",flex:"1 1 auto",width:"100%",height:"100%",overflow:"hidden"},r={flex:"0 0 auto",overflow:"hidden"},n={display:"flex",flexFlow:"column nowrap",flex:"1 1 auto",padding:"20px 24px 6px",overflow:"hidden",position:"relative"},i=l(null),s=l(null),d=l(null),u=Rl(),c=(e={})=>{i.value&&(i.value.queryParams={...i.value.queryParams,...e},i.value.doTableRefresh())},p=e=>{var l;null==(l=d.value)||l.doEdit(e)},v=()=>{var e;null==(e=d.value)||e.doAdd({})};var m;return kt({id:"orgTree"}).then((e=>{if("0000"!==e.code)return Promise.reject();a.value.orgTree.splice(0),a.value.orgTree.push(...e.result)})),(m={id:"dept",sqlParams:{orgId:"",isAll:"1"}},Kl({url:"/base/getOptionById",method:"post",data:m})).then((e=>{if("0000"!==e.code)return Promise.reject();a.value.deptId.splice(0),a.value.deptId.push(...e.result)})),function(e){return Kl({url:"/role/getRoleInfoList",method:"post",data:e})}({activity:"Y"}).then((e=>{if("0000"!==e.code)return Promise.reject();a.value.roleId.splice(0),a.value.roleId.push(...e.result)})),(e,l)=>{const u=_e;return w(),C("section",Dr,[o(u,{style:t,headStyle:r,bodyStyle:n,bordered:!1},{default:T((()=>[S("div",Ur,[o(wr,{ref_key:"query",ref:s,onQueryTable:c,onAddRecord:v},null,512)]),S("div",Lr,[o(Mr,{ref_key:"table",ref:i,presetOptions:_(a),onEditRecord:p},null,8,["presetOptions"])])])),_:1}),o(Fr,{ref_key:"drawer",ref:d,presetOptions:_(a),onSubmitted:c},null,8,["presetOptions"])])}}}),[["__scopeId","data-v-f475dc74"]]),Hr=Object.freeze(Object.defineProperty({__proto__:null,default:qr},Symbol.toStringTag,{value:"Module"}));export{Fl as A,ra as D,Da as L,Mt as O,na as P,To as R,Ll as U,Ul as _,Nl as a,ya as b,ea as c,oa as d,sa as e,ta as f,ba as g,ua as h,pa as i,ql as j,Ql as k,xa as l,jl as m,El as n,Ca as o,Pa as p,Oa as q,vr as r,Hr as s,Rl as u};
