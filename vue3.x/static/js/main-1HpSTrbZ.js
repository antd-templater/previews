const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["static/js/bootstrap-75MdoSos.js","static/js/vue-all-B1EBbYCn.js","static/js/storage-all-Qy_iYzrn.js","static/js/antdv-all-D2w1oCL4.js","static/js/vendors-all-k1ooatmc.js","static/js/date-all-C_AOCfXn.js","static/js/ant-design-icons-vue-Cd_tewpm.js","static/js/ant-design-colors-Cft-BAds.js","static/js/ant-design-icons-svg-DspUpZAK.js","static/js/lodash-all-CicsToA6.js","static/js/ant-design-localer-B44ntfxN.js","static/js/antd-template-library-45odgXEa.js","static/js/assets-all-CV7dZIGH.js","static/js/darker-all-mmh7Y2Mi.js","static/js/fetch-all-BcqMBTJ4.js","static/css/bootstrap-Dz7dIqNj.css"])))=>i.map(i=>d[i]);
import{l as e,b as o}from"./ant-design-localer-B44ntfxN.js";import{V as s,J as t,y as a}from"./antdv-all-D2w1oCL4.js";import{u as r,d as i,_ as n,U as c,A as d,a as m,g as l,b as u,c as p,e as y,f as h,h as _,i as b,j as g,k as L,l as v,D as f,P as w}from"./bootstrap-75MdoSos.js";import{d as E}from"./date-all-C_AOCfXn.js";import{d as R,p as j,w as P,y as k,a7 as O,$ as A,a0 as T,c as x,u as C,ab as M,ac as V,ad as D,t as I,ae as S}from"./vue-all-B1EBbYCn.js";import{n as q}from"./antd-template-library-45odgXEa.js";import"./temporary-BjIUDAlO.js";import{t as z,C as U}from"./vendors-all-k1ooatmc.js";const B=R({__name:"App",setup(t){const a=r(),i=j((()=>a.componentSize)),n=j((()=>a.language===e.locale?e:o)),c=j((()=>({token:{borderRadius:4,colorLink:a.primaryColor,colorLinkHover:a.primaryColor,colorLinkActive:a.primaryColor,colorPrimary:a.primaryColor,colorWarning:a.warningColor,colorSuccess:a.successColor,colorError:a.errorColor,colorInfo:a.infoColor}})));return P((()=>{a.isMacOS?document.body.classList.add("is-mac-os"):document.body.classList.remove("is-mac-os"),a.isMobile?document.body.classList.add("is-mobile"):document.body.classList.remove("is-mobile"),a.isMixMenu?document.body.classList.add("is-mix-menu"):document.body.classList.remove("is-mix-menu"),a.isTopMenu?document.body.classList.add("is-top-menu"):document.body.classList.remove("is-top-menu"),a.isSideMenu?document.body.classList.add("is-side-menu"):document.body.classList.remove("is-side-menu"),a.isRealDark?document.body.classList.add("is-real-dark"):document.body.classList.remove("is-real-dark"),a.isWindowOS?document.body.classList.add("is-window-os"):document.body.classList.remove("is-window-os"),a.themeWeak?document.body.classList.add("is-theme-weak"):document.body.classList.remove("is-theme-weak"),a.keepAlive?document.body.classList.add("is-keep-alive"):document.body.classList.remove("is-keep-alive"),a.multiTab?document.body.classList.add("is-multi-tab"):document.body.classList.remove("is-multi-tab"),s.config({theme:a.themeColor}),E.locale(a.language)})),(e,o)=>{const t=k("RouterView"),a=s;return A(),O(a,{theme:C(c),locale:C(n),componentSize:C(i)},{default:T((()=>[x(t)])),_:1},8,["theme","locale","componentSize"])}}}),W=i.constantRoutes;W.push({path:"/index",name:"index",redirect:"/system/OrganizeManage"},{path:"/auth",redirect:"/auth/Login",component:c,children:[{path:"Login",name:"Login",component:()=>n((()=>import("./bootstrap-75MdoSos.js").then((e=>e.L))),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15])),meta:{title:"系统登录"}}]});const F=M({routes:W,history:d?V(m):D(m),scrollBehavior:(e,o,s)=>{const t=r(),a=t.multiTab,i=t.keepAlive,n=!1!==e.meta.allowCache;return a&&i&&n&&s?s:{top:0,left:0}}}),H={...u(Object.assign({"/src/views/auth/Login.vue":()=>n((()=>import("./bootstrap-75MdoSos.js").then((e=>e.L))),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15])),"/src/views/error/PageError403.vue":()=>n((()=>import("./bootstrap-75MdoSos.js").then((e=>e.o))),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15])),"/src/views/error/PageError404.vue":()=>n((()=>import("./bootstrap-75MdoSos.js").then((e=>e.p))),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15])),"/src/views/error/PageError500.vue":()=>n((()=>import("./bootstrap-75MdoSos.js").then((e=>e.q))),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15])),"/src/views/system/OrganizeManage.vue":()=>n((()=>import("./bootstrap-75MdoSos.js").then((e=>e.O))),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15])),"/src/views/system/ResourceManage.vue":()=>n((()=>import("./bootstrap-75MdoSos.js").then((e=>e.R))),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15])),"/src/views/system/RoleManage.vue":()=>n((()=>import("./bootstrap-75MdoSos.js").then((e=>e.s))),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15])),"/src/views/system/UserManage.vue":()=>n((()=>import("./bootstrap-75MdoSos.js").then((e=>e.t))),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]))})),...l(Object.assign({"/src/layout/BasicLayout.tsx":g,"/src/layout/BlankLayout.tsx":b,"/src/layout/PageFrame.tsx":_,"/src/layout/PageView.tsx":h,"/src/layout/RouteView.tsx":y,"/src/layout/UserLayout.tsx":p}))};z.configure({showSpinner:!1});const J="/auth/Login",$=["/auth/Login"];F.beforeEach((async(e,o,s)=>{z.start();const a=L(),r=v(),i=a.token,n=a.logined;if(i){if(e.path===J)return void s({path:U(e.query.redirect)&&e.query.redirect||"/index"});if(!n){try{await a.loginUserInfo({}),await r.generateRouter({},H);const t=I(r.dynamicRoutes),i=o.query.redirect||e.path,n="string"==typeof i?decodeURIComponent(i):"";for(const e of t)F.addRoute(e);e.path===n?s({...e,replace:!0}):s({path:n})}catch{await new Promise((e=>{t.error({duration:.8,message:"系统通知",description:"获取用户信息失败，请重新登录!",onClose:()=>a.logout().then(e).catch(e)})})),s({path:J,query:{redirect:e.fullPath}})}return}return s()}return e&&e.name?$.includes(e.path)?s():(await new Promise((e=>{t.error({duration:.8,message:"系统通知",description:"token 已过期, 请重新登录!",onClose:()=>a.logout().then(e).catch(e)})})),void s({path:J,query:{redirect:e.fullPath}})):s({path:J})})),F.afterEach((e=>{let o="";for(const r of e.matched){const e="/"!==r.path,s="string"==typeof r.meta.title&&r.meta.title.trim();e&&s&&(o=o?o+" - "+s:s)}const s=r(),t=s.themeMode,a=s.toggleDomTitle;(0,s.toggleThemeMode)(t),a(o),z.done()})),t.config({duration:1}),a.config({duration:1}),S(B).use(q).use(f).use(w).use(F).mount("#app");export{F as R};
