const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["static/js/bootstrap-BAto3-Mq.js","static/js/vue-all-BcVMihJw.js","static/js/storage-all-CRaT4SLK.js","static/js/vendors-all-Deeho4BZ.js","static/js/darker-all-dhSHTb20.js","static/js/antdv-all-DM9SiAGa.js","static/js/ant-design-icons-vue-B0-7dT7N.js","static/js/ant-design-colors-DyEJ-9bl.js","static/js/ant-design-icons-svg-DspUpZAK.js","static/js/lodash-all-D3f1n_xL.js","static/js/ant-design-localer-DXKbKrJp.js","static/js/date-all-CbEzt2p3.js","static/js/antd-template-library-BeNTQFRC.js","static/js/assets-all-CV7dZIGH.js","static/js/fetch-all-BaLKwx-3.js","static/css/bootstrap-Dz7dIqNj.css"])))=>i.map(i=>d[i]);
import{l as e,b as o}from"./ant-design-localer-DXKbKrJp.js";import{V as s,J as t,y as a}from"./antdv-all-DM9SiAGa.js";import{u as r,d as i,U as n,_ as c,A as d,a as m,g as l,b as u,c as p,e as h,f as y,h as _,i as b,j as g,k as L,l as v,D as f,P as w}from"./bootstrap-BAto3-Mq.js";import{d as E,p as R,w as j,_ as P,a6 as k,a0 as O,u as A,z as T,c as x,ab as C,ac as M,ad as V,t as D,ae as I}from"./vue-all-BcVMihJw.js";import{d as S}from"./date-all-CbEzt2p3.js";import{n as q}from"./antd-template-library-BeNTQFRC.js";import"./temporary-BBGwC8Ap.js";import{p as z,C as U}from"./vendors-all-Deeho4BZ.js";const B=E({__name:"App",setup(t){const a=r(),i=R((()=>a.componentSize)),n=R((()=>a.language===e.locale?e:o)),c=R((()=>({token:{borderRadius:4,colorLink:a.primaryColor,colorLinkHover:a.primaryColor,colorLinkActive:a.primaryColor,colorPrimary:a.primaryColor,colorWarning:a.warningColor,colorSuccess:a.successColor,colorError:a.errorColor,colorInfo:a.infoColor}})));return j((()=>{a.isMacOS?document.body.classList.add("is-mac-os"):document.body.classList.remove("is-mac-os"),a.isMobile?document.body.classList.add("is-mobile"):document.body.classList.remove("is-mobile"),a.isMixMenu?document.body.classList.add("is-mix-menu"):document.body.classList.remove("is-mix-menu"),a.isTopMenu?document.body.classList.add("is-top-menu"):document.body.classList.remove("is-top-menu"),a.isSideMenu?document.body.classList.add("is-side-menu"):document.body.classList.remove("is-side-menu"),a.isRealDark?document.body.classList.add("is-real-dark"):document.body.classList.remove("is-real-dark"),a.isWindowOS?document.body.classList.add("is-window-os"):document.body.classList.remove("is-window-os"),a.themeWeak?document.body.classList.add("is-theme-weak"):document.body.classList.remove("is-theme-weak"),a.keepAlive?document.body.classList.add("is-keep-alive"):document.body.classList.remove("is-keep-alive"),a.multiTab?document.body.classList.add("is-multi-tab"):document.body.classList.remove("is-multi-tab"),s.config({theme:a.themeColor}),S.locale(a.language)})),(e,o)=>{const t=T("RouterView"),a=s;return P(),k(a,{theme:A(c),locale:A(n),componentSize:A(i)},{default:O((()=>[x(t)])),_:1},8,["theme","locale","componentSize"])}}}),W=i.constantRoutes;W.push({path:"/index",name:"index",redirect:"/system/OrganizeManage"},{path:"/auth",redirect:"/auth/Login",component:n,children:[{path:"Login",name:"Login",component:()=>c((()=>import("./bootstrap-BAto3-Mq.js").then((e=>e.L))),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15])),meta:{title:"系统登录"}}]});const F=C({routes:W,history:d?M(m):V(m),scrollBehavior:(e,o,s)=>{const t=r(),a=t.multiTab,i=t.keepAlive,n=!1!==e.meta.allowCache;return a&&i&&n&&s?s:{top:0,left:0}}}),H={...l(Object.assign({"/src/views/auth/Login.vue":()=>c((()=>import("./bootstrap-BAto3-Mq.js").then((e=>e.L))),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15])),"/src/views/error/PageError403.vue":()=>c((()=>import("./bootstrap-BAto3-Mq.js").then((e=>e.o))),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15])),"/src/views/error/PageError404.vue":()=>c((()=>import("./bootstrap-BAto3-Mq.js").then((e=>e.p))),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15])),"/src/views/error/PageError500.vue":()=>c((()=>import("./bootstrap-BAto3-Mq.js").then((e=>e.q))),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15])),"/src/views/system/OrganizeManage.vue":()=>c((()=>import("./bootstrap-BAto3-Mq.js").then((e=>e.O))),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15])),"/src/views/system/ResourceManage.vue":()=>c((()=>import("./bootstrap-BAto3-Mq.js").then((e=>e.R))),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15])),"/src/views/system/RoleManage.vue":()=>c((()=>import("./bootstrap-BAto3-Mq.js").then((e=>e.r))),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15])),"/src/views/system/UserManage.vue":()=>c((()=>import("./bootstrap-BAto3-Mq.js").then((e=>e.s))),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]))})),...u(Object.assign({"/src/layout/BasicLayout.tsx":p,"/src/layout/BlankLayout.tsx":h,"/src/layout/PageFrame.tsx":y,"/src/layout/PageView.tsx":_,"/src/layout/RouteView.tsx":b,"/src/layout/UserLayout.tsx":g}))};z.configure({showSpinner:!1});const J="/auth/Login",G=["/auth/Login"];F.beforeEach((async(e,o,s)=>{z.start();const a=L(),r=v(),i=a.token,n=a.logined;if(i){if(e.path===J)return void s({path:U(e.query.redirect)&&e.query.redirect||"/index"});if(!n){try{await a.loginUserInfo({}),await r.generateRouter({},H);const t=D(r.dynamicRoutes),i=o.query.redirect||e.path,n="string"==typeof i?decodeURIComponent(i):"";for(const e of t)F.addRoute(e);e.path===n?s({...e,replace:!0}):s({path:n})}catch{await new Promise((e=>{t.error({duration:.8,message:"系统通知",description:"获取用户信息失败，请重新登录!",onClose:()=>a.logout().then(e).catch(e)})})),s({path:J,query:{redirect:e.fullPath}})}return}return s()}return e&&e.name?G.includes(e.path)?s():(await new Promise((e=>{t.error({duration:.8,message:"系统通知",description:"token 已过期, 请重新登录!",onClose:()=>a.logout().then(e).catch(e)})})),void s({path:J,query:{redirect:e.fullPath}})):s({path:J})})),F.afterEach((e=>{let o="";for(const r of e.matched){const e="/"!==r.path,s="string"==typeof r.meta.title&&r.meta.title.trim();e&&s&&(o=o?o+" - "+s:s)}const s=r(),t=s.themeMode,a=s.toggleDomTitle;(0,s.toggleThemeMode)(t),a(o),z.done()})),t.config({duration:1}),a.config({duration:1}),I(B).use(q).use(f).use(w).use(F).mount("#app");export{F as R};
